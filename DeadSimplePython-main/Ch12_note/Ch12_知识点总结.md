# Chapter 12 - äºŒè¿›åˆ¶æ•°æ®ä¸ä½æ“ä½œ (Binary Data and Bitwise Operations)

> **æœ¬ç« ä¸»é¢˜**: Python çš„äºŒè¿›åˆ¶æ•°æ®å¤„ç†å’Œä½è¿ç®—
> **é¢å‘**: æœ‰ Java å¼€å‘ç»éªŒçš„å­¦ä¹ è€…

---

## æ ¸å¿ƒçŸ¥è¯†ç‚¹

### 1. bytes ç±»å‹

#### Python å®ç°
```python
# bytes å­—é¢é‡ (ä¸å¯å˜)
bits = b"HELLO"
bits = b"\x48\x45\x4C\x4C\x4F"  # åå…­è¿›åˆ¶è¡¨ç¤º

# åˆ›å»º bytes
data = bytes([72, 101, 108, 108, 111])  # ä»æ•´æ•°åˆ—è¡¨
encoded = "Hello".encode('utf-8')       # ä»å­—ç¬¦ä¸²ç¼–ç 

# bytearray (å¯å˜ç‰ˆæœ¬)
mutable_bits = bytearray(b"HELLO")
mutable_bits[0] = 74  # å¯ä»¥ä¿®æ”¹
```

#### Java å¯¹æ¯”
```java
// Java - byte[] æ•°ç»„
byte[] bits = "HELLO".getBytes();
byte[] bits = new byte[]{0x48, 0x45, 0x4C, 0x4C, 0x4F};

// ä»æ•´æ•°åˆ—è¡¨åˆ›å»º
byte[] data = new byte[]{72, 101, 108, 108, 111};

// ä»å­—ç¬¦ä¸²ç¼–ç 
byte[] encoded = "Hello".getBytes(StandardCharsets.UTF_8);

// Java byte[] æ˜¯å¯å˜çš„
bits[0] = 74;
```

#### ğŸ”‘ æ ¸å¿ƒå·®å¼‚
| ç‰¹æ€§ | Python bytes | Java byte[] |
|------|--------------|-------------|
| ä¸å¯å˜æ€§ | `bytes` ä¸å¯å˜ | å¯å˜ |
| å¯å˜ç‰ˆæœ¬ | `bytearray` | é»˜è®¤å¯å˜ |
| å­—é¢é‡ | `b"..."` | `new byte[]{}` |

#### ğŸ’¡ Javaer æ³¨æ„äº‹é¡¹
- âœ… `bytes` â‰ˆ Java çš„ä¸å¯å˜ `byte[]`
- âš ï¸ `bytearray` â‰ˆ Java çš„å¯å˜ `byte[]`
- ğŸ“Œ è®°å¿†: "bytes = ä¸å¯å˜å­—èŠ‚åºåˆ—"

**ç›¸å…³æ–‡ä»¶:** `bytes_literal.py:1-7`

---

### 2. æ•´æ•°ä¸å­—èŠ‚è½¬æ¢

#### Python å®ç°
```python
import sys

# æ•´æ•°è½¬å­—èŠ‚
answer = 42
bits = answer.to_bytes(4, byteorder='little', signed=True)
print(bits.hex(sep=' '))  # '2a 00 00 00'

# è´Ÿæ•°
answer = -42
bits = answer.to_bytes(4, byteorder='little', signed=True)
print(bits.hex(sep=' '))  # 'd6 ff ff ff'

# å­—èŠ‚è½¬æ•´æ•°
number = int.from_bytes(bits, byteorder='little', signed=True)
print(number)  # -42
```

#### Java å¯¹æ¯”
```java
// Java - ByteBuffer
import java.nio.ByteBuffer;
import java.nio.ByteOrder;

// æ•´æ•°è½¬å­—èŠ‚
int answer = 42;
ByteBuffer buffer = ByteBuffer.allocate(4)
    .order(ByteOrder.LITTLE_ENDIAN);
buffer.putInt(answer);
byte[] bits = buffer.array();

// å­—èŠ‚è½¬æ•´æ•°
buffer = ByteBuffer.wrap(bits).order(ByteOrder.LITTLE_ENDIAN);
int number = buffer.getInt();
```

#### ğŸ’¡ Javaer æ³¨æ„äº‹é¡¹
- âœ… `to_bytes()` / `from_bytes()` â‰ˆ Java çš„ `ByteBuffer`
- âš ï¸ éœ€è¦æŒ‡å®šå­—èŠ‚åº (little/big endian)
- ğŸ“Œ è®°å¿†: "to_bytes = æ•´æ•°åºåˆ—åŒ–"

**ç›¸å…³æ–‡ä»¶:** `int_to_bytes.py:5-11`

---

### 3. struct æ¨¡å— - äºŒè¿›åˆ¶æ‰“åŒ…

#### Python å®ç°
```python
import struct

# æ‰“åŒ…æ•´æ•°
answer = -360
bits = struct.pack('i', answer)  # 'i' = signed int

# è§£åŒ…æ•´æ•°
new_answer, = struct.unpack('i', bits)
print(new_answer)  # -360

# æ‰“åŒ…å¤šä¸ªå€¼
data = struct.pack('if?', 42, 3.14, True)
# 'i' = int, 'f' = float, '?' = bool

# è§£åŒ…å¤šä¸ªå€¼
num, pi, flag = struct.unpack('if?', data)
```

**æ ¼å¼å­—ç¬¦:**
- `i` - signed int (4 bytes)
- `f` - float (4 bytes)
- `?` - bool (1 byte)
- `s` - string (æŒ‡å®šé•¿åº¦)

#### Java å¯¹æ¯”

```java
// Java - ByteBuffer
ByteBuffer buffer = ByteBuffer.allocate(9);
buffer.putInt(42);
buffer.putFloat(3.14f);
buffer.put((byte) 1);  // boolean as byte

buffer.flip();
int num = buffer.getInt();
float pi = buffer.getFloat();
boolean flag = buffer.get() != 0;
```

#### ğŸ’¡ Javaer æ³¨æ„äº‹é¡¹
- âœ… `struct` æ¨¡å— â‰ˆ Java çš„ `ByteBuffer`
- âš ï¸ æ ¼å¼å­—ç¬¦ä¸²å®šä¹‰æ•°æ®å¸ƒå±€
- ğŸ“Œ è®°å¿†: "struct = C é£æ ¼çš„äºŒè¿›åˆ¶æ‰“åŒ…"

**ç›¸å…³æ–‡ä»¶:** `struct_int.py:4-8`

---

### 4. ä½è¿ç®—

#### Python å®ç°
```python
# æŒ‰ä½ä¸ (&)
print(9 & 8)    # 8 (1001 & 1000 = 1000)

# æŒ‰ä½æˆ– (|)
print(9 | 8)    # 9 (1001 | 1000 = 1001)

# æŒ‰ä½å¼‚æˆ– (^)
print(9 ^ 8)    # 1 (1001 ^ 1000 = 0001)

# æŒ‰ä½å–å (~)
print(~8)       # -9

# å·¦ç§» (<<)
print(1 << 3)   # 8 (0001 << 3 = 1000)

# å³ç§» (>>)
print(8 >> 3)   # 1 (1000 >> 3 = 0001)
```

#### Java å¯¹æ¯”
```java
// Java - ä½è¿ç®—ç¬¦å®Œå…¨ç›¸åŒ
System.out.println(9 & 8);    // 8
System.out.println(9 | 8);    // 9
System.out.println(9 ^ 8);    // 1
System.out.println(~8);       // -9
System.out.println(1 << 3);   // 8
System.out.println(8 >> 3);   // 1

// Java è¿˜æœ‰æ— ç¬¦å·å³ç§» (>>>)
System.out.println(-8 >>> 1); // æ­£æ•°ç»“æœ
```

#### ğŸ’¡ Javaer æ³¨æ„äº‹é¡¹
- âœ… Python å’Œ Java çš„ä½è¿ç®—ç¬¦å‡ ä¹ç›¸åŒ
- âš ï¸ Python æ²¡æœ‰ `>>>` æ— ç¬¦å·å³ç§»
- ğŸ“Œ è®°å¿†: "ä½è¿ç®—è¯­æ³•ç›¸åŒ"

**ç›¸å…³æ–‡ä»¶:** `bitwise_shift.py`, `bitwise_inversion.py`

---

## æ€»ç»“

| ç‰¹æ€§ | Python | Java |
|------|--------|------|
| ä¸å¯å˜å­—èŠ‚ | `bytes` | æ—  (byte[] å¯å˜) |
| å¯å˜å­—èŠ‚ | `bytearray` | `byte[]` |
| æ•´æ•°è½¬æ¢ | `to_bytes()` / `from_bytes()` | `ByteBuffer` |
| äºŒè¿›åˆ¶æ‰“åŒ… | `struct` æ¨¡å— | `ByteBuffer` |
| ä½è¿ç®— | `&`, `|`, `^`, `~`, `<<`, `>>` | ç›¸åŒ + `>>>` |

---

**åˆ¶ä½œæ—¶é—´:** 2025-11-25
**åŸºäº:** DeadSimplePython Chapter 12 ç¤ºä¾‹ä»£ç 
