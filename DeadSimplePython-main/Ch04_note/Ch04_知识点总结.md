# Chapter 04 - æ¨¡å—ä¸åŒ… (Modules and Packages)

> **æœ¬ç« ä¸»é¢˜**: Python çš„æ¨¡å—ç³»ç»Ÿå’ŒåŒ…ç®¡ç†
> **é¢å‘**: æœ‰ Java å¼€å‘ç»éªŒçš„å­¦ä¹ è€…

---

## ç›®å½•
1. [æ¨¡å—åŸºç¡€](#1-æ¨¡å—åŸºç¡€)
2. [å¯¼å…¥æ¨¡å—](#2-å¯¼å…¥æ¨¡å—)
3. [__name__ å±æ€§](#3-__name__-å±æ€§)
4. [åŒ… (Packages)](#4-åŒ…-packages)
5. [__init__.py æ–‡ä»¶](#5-__init__py-æ–‡ä»¶)
6. [ç›¸å¯¹å¯¼å…¥ä¸ç»å¯¹å¯¼å…¥](#6-ç›¸å¯¹å¯¼å…¥ä¸ç»å¯¹å¯¼å…¥)
7. [__all__ å˜é‡](#7-__all__-å˜é‡)
8. [é¡¹ç›®ç»“æ„æœ€ä½³å®è·µ](#8-é¡¹ç›®ç»“æ„æœ€ä½³å®è·µ)

---

## 1. æ¨¡å—åŸºç¡€

### 1.1 ä»€ä¹ˆæ˜¯æ¨¡å—?

#### Python å®ç°
```python
# smart_door.py - è¿™å°±æ˜¯ä¸€ä¸ªæ¨¡å—
def open():
    print("Ahhhhhhhhhhhhhh.")

def close():
    print("Thank you for making a simple door very happy.")
```

**å…³é”®æ¦‚å¿µ:**
- æ¯ä¸ª `.py` æ–‡ä»¶å°±æ˜¯ä¸€ä¸ªæ¨¡å—
- æ–‡ä»¶åå³æ¨¡å—å (ä¸å« `.py` æ‰©å±•å)
- æ¨¡å—å¯ä»¥åŒ…å«å‡½æ•°ã€ç±»ã€å˜é‡

#### Java å¯¹æ¯”
```java
// SmartDoor.java - Java ä¸­çš„ç±»æ–‡ä»¶
package com.example;

public class SmartDoor {
    public static void open() {
        System.out.println("Ahhhhhhhhhhhhhh.");
    }

    public static void close() {
        System.out.println("Thank you for making a simple door very happy.");
    }
}
```

#### ğŸ”‘ æ ¸å¿ƒå·®å¼‚
| ç‰¹æ€§ | Python æ¨¡å— | Java ç±»æ–‡ä»¶ |
|------|-------------|-------------|
| æ–‡ä»¶å•ä½ | `.py` æ–‡ä»¶ = æ¨¡å— | `.java` æ–‡ä»¶ = ç±» |
| å‘½åè¦æ±‚ | æ–‡ä»¶å = æ¨¡å—å | æ–‡ä»¶å = å…¬å…±ç±»å |
| å†…å®¹é™åˆ¶ | å¯åŒ…å«å¤šä¸ªç±»/å‡½æ•° | ä¸€ä¸ªå…¬å…±ç±» |
| åŒ…å£°æ˜ | ä¸éœ€è¦æ˜¾å¼å£°æ˜ | éœ€è¦ `package` å£°æ˜ |
| å¯æ‰§è¡Œæ€§ | å¯ä»¥ç›´æ¥è¿è¡Œ | éœ€è¦æœ‰ `main` æ–¹æ³• |

#### ğŸ’¡ Javaer æ³¨æ„äº‹é¡¹
- âš ï¸ Python æ¨¡å— â‰  Java ç±»,æ›´ç±»ä¼¼äº Java çš„**åŒ…å«å¤šä¸ªå·¥å…·æ–¹æ³•çš„å·¥å…·ç±»**
- âœ… ä¸€ä¸ª Python æ¨¡å—å¯ä»¥åŒ…å«å¤šä¸ªç±»å’Œå‡½æ•°,ä¸åƒ Java ä¸€ä¸ªæ–‡ä»¶åªèƒ½æœ‰ä¸€ä¸ª public ç±»
- ğŸ“Œ è®°å¿†: "Python æ¨¡å— = Java çš„ä¸€ä¸ª package ä¸­çš„å•ä¸ªæ–‡ä»¶"

**ç›¸å…³æ–‡ä»¶:** `smart_door.py`

---

## 2. å¯¼å…¥æ¨¡å—

### 2.1 åŸºæœ¬å¯¼å…¥æ–¹å¼

#### Python å®ç°
```python
# æ–¹å¼ 1: å¯¼å…¥æ•´ä¸ªæ¨¡å—
import smart_door
smart_door.open()
smart_door.close()

# æ–¹å¼ 2: å¯¼å…¥ç‰¹å®šå†…å®¹
from smart_door import open, close
open()
close()

# æ–¹å¼ 3: å¯¼å…¥æ—¶é‡å‘½å (åˆ«å)
from smart_door import open as door_open
from smart_door import close
door_open()
close()

# æ–¹å¼ 4: å¯¼å…¥æ‰€æœ‰å†…å®¹ (ä¸æ¨è)
from smart_door import *
open()
close()
```

#### Java å¯¹æ¯”
```java
// æ–¹å¼ 1: å¯¼å…¥ç±»
import com.example.SmartDoor;
SmartDoor.open();
SmartDoor.close();

// æ–¹å¼ 2: é™æ€å¯¼å…¥
import static com.example.SmartDoor.open;
import static com.example.SmartDoor.close;
open();
close();

// æ–¹å¼ 3: å¯¼å…¥æ—¶æ— æ³•é‡å‘½å (Java ä¸æ”¯æŒ)
// ä½†å¯ä»¥é€šè¿‡ç»§æ‰¿æˆ–ç»„åˆå®ç°åˆ«åæ•ˆæœ

// æ–¹å¼ 4: é€šé…ç¬¦å¯¼å…¥
import com.example.*;
SmartDoor.open();
```

#### ğŸ”‘ æ ¸å¿ƒå·®å¼‚
| ç‰¹æ€§ | Python | Java |
|------|--------|------|
| å¯¼å…¥è¯­æ³• | `import module` | `import package.Class` |
| å¯¼å…¥å‡½æ•° | `from module import func` | `import static Class.method` |
| åˆ«å | âœ… `import x as y` | âŒ ä¸ç›´æ¥æ”¯æŒ |
| é€šé…ç¬¦ | `from module import *` | `import package.*` |
| å¯¼å…¥æ—¶æœº | è¿è¡Œæ—¶ | ç¼–è¯‘æ—¶ |

#### ğŸ’¡ Javaer æ³¨æ„äº‹é¡¹
- âœ… `import module` â‰ˆ Java çš„ `import package.Class`
- âœ… `from module import func` â‰ˆ Java çš„ `import static Class.method`
- âš ï¸ Python å¯ä»¥ç»™å¯¼å…¥èµ·åˆ«å: `import numpy as np`,Java ä¸æ”¯æŒ
- âš ï¸ é¿å…ä½¿ç”¨ `from module import *`,å¯èƒ½å¯¼è‡´å‘½åå†²çª
- ğŸ“Œ è®°å¿†: "Python å¯¼å…¥æ›´çµæ´»,æ”¯æŒåˆ«åå’Œé€‰æ‹©æ€§å¯¼å…¥"

### 2.2 è§£å†³å‘½åå†²çª

#### Python å®ç°
```python
# é—®é¢˜: å†…ç½®å‡½æ•° open() ä¸è‡ªå®šä¹‰ open() å†²çª
from smart_door import open as door_open  # ä½¿ç”¨åˆ«å
from smart_door import close

door_open()  # è°ƒç”¨ smart_door çš„ open
close()

# ä½¿ç”¨å†…ç½®çš„ open
somefile = open("data.txt", "r")  # å†…ç½®çš„æ–‡ä»¶æ‰“å¼€
somefile.close()
```

#### Java å¯¹æ¯”
```java
// Java ä¸­å¦‚æœæœ‰å‘½åå†²çª,ä½¿ç”¨å…¨é™å®šå
import com.example.SmartDoor;
import java.util.Date;
import java.sql.Date;  // å†²çª!

// è§£å†³æ–¹å¼ 1: ä½¿ç”¨å…¨é™å®šå
java.sql.Date sqlDate = new java.sql.Date(0);
java.util.Date utilDate = new java.util.Date();

// è§£å†³æ–¹å¼ 2: åªå¯¼å…¥ä¸€ä¸ª,å¦ä¸€ä¸ªç”¨å…¨é™å®šå
import java.util.Date;
// java.sql.Date ä½¿ç”¨å…¨é™å®šå
```

#### ğŸ”‘ æ ¸å¿ƒå·®å¼‚
| ç‰¹æ€§ | Python | Java |
|------|--------|------|
| è§£å†³å†²çª | ä½¿ç”¨åˆ«å `as` | ä½¿ç”¨å…¨é™å®šå |
| çµæ´»æ€§ | é«˜ (åˆ«åæœºåˆ¶) | ä½ (åªèƒ½ç”¨å…¨å) |
| å¯è¯»æ€§ | é«˜ | ä¸­ç­‰ |

#### ğŸ’¡ Javaer æ³¨æ„äº‹é¡¹
- âœ… Python çš„ `as` åˆ«åæœºåˆ¶æ¯” Java çš„å…¨é™å®šåæ›´ç®€æ´
- âš ï¸ åˆ«ååªåœ¨å½“å‰æ–‡ä»¶ç”Ÿæ•ˆ,ä¸å½±å“å…¶ä»–æ–‡ä»¶
- ğŸ“Œ è®°å¿†: "é‡åˆ°å†²çª,Python ç”¨ as,Java ç”¨å…¨å"

**ç›¸å…³æ–‡ä»¶:** `use_smart_door.py:6-13`

---

## 3. `__name__` å±æ€§

### 3.1 æ¨¡å—åç§°è¯†åˆ«

#### Python å®ç°
```python
# testpkg/awesome.py
def greet():
    print("Hello, world!")

# å½“æ¨¡å—è¢«ç›´æ¥è¿è¡Œæ—¶
if __name__ == "__main__":
    print("Awesome module was run.")
    greet()
```

```python
# example.py
from testpkg import awesome

print(__name__)          # è¾“å‡º: "__main__" (å½“å‰æ–‡ä»¶è¢«ç›´æ¥è¿è¡Œ)
print(awesome.__name__)  # è¾“å‡º: "testpkg.awesome" (å¯¼å…¥çš„æ¨¡å—å)
```

**å·¥ä½œåŸç†:**
- å½“æ–‡ä»¶è¢«ç›´æ¥è¿è¡Œæ—¶: `__name__ == "__main__"`
- å½“æ–‡ä»¶è¢«å¯¼å…¥æ—¶: `__name__ == "æ¨¡å—å"`

#### Java å¯¹æ¯”
```java
// Awesome.java
package com.example.testpkg;

public class Awesome {
    public static void greet() {
        System.out.println("Hello, world!");
    }

    // Java ä¸­é€šè¿‡ main æ–¹æ³•åˆ¤æ–­æ˜¯å¦ç›´æ¥è¿è¡Œ
    public static void main(String[] args) {
        System.out.println("Awesome class was run.");
        greet();
    }
}
```

```java
// Example.java
import com.example.testpkg.Awesome;

public class Example {
    public static void main(String[] args) {
        // Java ä¸­è·å–ç±»å
        System.out.println(Example.class.getName());  // "Example"
        System.out.println(Awesome.class.getName());  // "com.example.testpkg.Awesome"
    }
}
```

#### ğŸ”‘ æ ¸å¿ƒå·®å¼‚
| ç‰¹æ€§ | Python `__name__` | Java `main` æ–¹æ³• |
|------|-------------------|------------------|
| åˆ¤æ–­ç›´æ¥è¿è¡Œ | `if __name__ == "__main__":` | `public static void main(...)` |
| æ¨¡å—å¯æ‰§è¡Œæ€§ | ä»»ä½•æ¨¡å—éƒ½å¯ä»¥æœ‰ `__main__` å— | ä»»ä½•ç±»éƒ½å¯ä»¥æœ‰ `main` æ–¹æ³• |
| è·å–æ¨¡å—å | `module.__name__` | `Class.getName()` |
| ç”¨é€” | æµ‹è¯•ä»£ç ã€ç¤ºä¾‹ä»£ç  | ç¨‹åºå…¥å£ |

#### ğŸ’¡ Javaer æ³¨æ„äº‹é¡¹
- âœ… `if __name__ == "__main__":` â‰ˆ Java çš„ `public static void main(String[] args)`
- âš ï¸ Python çš„ `__main__` å—å¸¸ç”¨äºç¼–å†™æµ‹è¯•ä»£ç ,Java çš„ main ä¸»è¦æ˜¯ç¨‹åºå…¥å£
- âš ï¸ Python ä¸­ä»»ä½•æ¨¡å—éƒ½å¯ä»¥ç›´æ¥è¿è¡Œ,Java éœ€è¦æœ‰ main æ–¹æ³•
- ğŸ“Œ è®°å¿†: "Python æ¯ä¸ªæ–‡ä»¶éƒ½å¯ä»¥æ˜¯å…¥å£,Java éœ€è¦ main æ–¹æ³•"

**ç›¸å…³æ–‡ä»¶:** `testpkg/awesome.py:5-6`, `example.py:3-4`

---

## 4. åŒ… (Packages)

### 4.1 åŒ…çš„ç»“æ„

#### Python å®ç°


```
rockets/                    # åŒ…ç›®å½•
â”œâ”€â”€ __init__.py            # åŒ…åˆå§‹åŒ–æ–‡ä»¶ (å¿…éœ€)
â”œâ”€â”€ smallrocket/           # å­åŒ…
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ rocket.py          # SmallRocket ç±»
â”œâ”€â”€ largerocket/           # å­åŒ…
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ rocket.py          # LargeRocket ç±»
â””â”€â”€ launchpad/             # å­åŒ…
    â”œâ”€â”€ __init__.py
    â””â”€â”€ pad.py             # Launchpad ç±»
```


```python
# rockets/smallrocket/rocket.py
class SmallRocket:
    def launch(self):
        print("whoosh")

# rockets/launchpad/pad.py
class Launchpad:
    def __init__(self, rocket):
        self.rocket = rocket

    def launch(self):
        self.rocket.launch()
```

#### Java å¯¹æ¯”
```
com/example/rockets/       # åŒ…ç›®å½•
â”œâ”€â”€ smallrocket/           # å­åŒ…
â”‚   â””â”€â”€ SmallRocket.java   # SmallRocket ç±»
â”œâ”€â”€ largerocket/           # å­åŒ…
â”‚   â””â”€â”€ LargeRocket.java   # LargeRocket ç±»
â””â”€â”€ launchpad/             # å­åŒ…
    â””â”€â”€ Launchpad.java     # Launchpad ç±»
```

```java
// com/example/rockets/smallrocket/SmallRocket.java
package com.example.rockets.smallrocket;

public class SmallRocket {
    public void launch() {
        System.out.println("whoosh");
    }
}

// com/example/rockets/launchpad/Launchpad.java
package com.example.rockets.launchpad;

public class Launchpad {
    private Object rocket;

    public Launchpad(Object rocket) {
        this.rocket = rocket;
    }

    public void launch() {
        // è°ƒç”¨ rocket çš„ launch æ–¹æ³•
    }
}
```

#### ğŸ”‘ æ ¸å¿ƒå·®å¼‚
| ç‰¹æ€§ | Python åŒ… | Java åŒ… |
|------|-----------|---------|
| æ ‡è¯†æ–¹å¼ | ç›®å½• + `__init__.py` | ç›®å½• + `package` å£°æ˜ |
| å¿…éœ€æ–‡ä»¶ | `__init__.py` (Python 3.3+ å¯é€‰) | æ¯ä¸ªç±»æ–‡ä»¶éœ€è¦ `package` å£°æ˜ |
| åŒ…åˆå§‹åŒ– | `__init__.py` ä¸­çš„ä»£ç  | é™æ€åˆå§‹åŒ–å— |
| å­åŒ…ç»“æ„ | åµŒå¥—ç›®å½• | åµŒå¥—ç›®å½• (ç‚¹å·åˆ†éš”) |
| å‘½åçº¦å®š | å°å†™,ä¸‹åˆ’çº¿åˆ†éš” | å°å†™,ç‚¹å·åˆ†éš” |

#### ğŸ’¡ Javaer æ³¨æ„äº‹é¡¹
- âš ï¸ **Python éœ€è¦ `__init__.py` æ–‡ä»¶æ¥æ ‡è¯†åŒ…** (Python 3.3+ å¯ä»¥æ˜¯éšå¼åŒ…)
- âœ… Python åŒ…ç»“æ„ â‰ˆ Java åŒ…ç»“æ„,éƒ½æ˜¯åµŒå¥—ç›®å½•
- âš ï¸ Python çš„ `__init__.py` å¯ä»¥åŒ…å«åˆå§‹åŒ–ä»£ç ,Java ç”¨é™æ€å—
- ğŸ“Œ è®°å¿†: "Python åŒ… = å¸¦ `__init__.py` çš„ç›®å½•"

**ç›¸å…³æ–‡ä»¶:** `rockets/` ç›®å½•ç»“æ„

---

## 5. `__init__.py` æ–‡ä»¶

### 5.1 åŒ…åˆå§‹åŒ–

#### Python å®ç°
```python
# rockets/__init__.py
from .smallrocket.rocket import SmallRocket
from .largerocket.rocket import LargeRocket
from .launchpad.pad import Launchpad

__all__ = ["SmallRocket", "LargeRocket", "Launchpad"]
```

**ä½œç”¨:**
1. **æ ‡è¯†åŒ…**: å‘Šè¯‰ Python è¿™ä¸ªç›®å½•æ˜¯ä¸€ä¸ªåŒ…
2. **åˆå§‹åŒ–ä»£ç **: å¯¼å…¥æ—¶æ‰§è¡Œçš„ä»£ç 
3. **ç®€åŒ–å¯¼å…¥**: åœ¨åŒ…çº§åˆ«æš´éœ²å­æ¨¡å—çš„å†…å®¹

#### ä½¿ç”¨æ•ˆæœ
```python
# æ²¡æœ‰ __init__.py æ—¶çš„å¯¼å…¥æ–¹å¼
from rockets.smallrocket.rocket import SmallRocket
from rockets.launchpad.pad import Launchpad

# æœ‰äº† __init__.py åçš„ç®€åŒ–å¯¼å…¥
from rockets import SmallRocket, Launchpad  # æ›´ç®€æ´!
```

#### Java å¯¹æ¯”
Java æ²¡æœ‰ç›´æ¥å¯¹åº”çš„æ¦‚å¿µ,ä½†å¯ä»¥ç±»æ¯”:

```java
// Java ä¸­é€šè¿‡ "é—¨é¢ç±»" æˆ– "å·¥å‚ç±»" å®ç°ç±»ä¼¼æ•ˆæœ
package com.example.rockets;

import com.example.rockets.smallrocket.SmallRocket;
import com.example.rockets.largerocket.LargeRocket;
import com.example.rockets.launchpad.Launchpad;

// é—¨é¢ç±» (Facade)
public class Rockets {
    // æä¾›ä¾¿æ·çš„è®¿é—®æ–¹æ³•
    public static SmallRocket createSmallRocket() {
        return new SmallRocket();
    }

    public static Launchpad createLaunchpad(Object rocket) {
        return new Launchpad(rocket);
    }
}
```

```java
// ä½¿ç”¨é—¨é¢ç±»
import com.example.rockets.Rockets;

Rockets.createSmallRocket();
Rockets.createLaunchpad(rocket);
```

#### ğŸ”‘ æ ¸å¿ƒå·®å¼‚
| ç‰¹æ€§ | Python `__init__.py` | Java é—¨é¢/å·¥å‚ç±» |
|------|---------------------|------------------|
| è‡ªåŠ¨æ‰§è¡Œ | âœ… å¯¼å…¥åŒ…æ—¶è‡ªåŠ¨æ‰§è¡Œ | âŒ éœ€è¦æ‰‹åŠ¨è°ƒç”¨ |
| ç®€åŒ–å¯¼å…¥ | âœ… è‡ªåŠ¨æš´éœ²å†…å®¹ | âš ï¸ éœ€è¦è®¾è®¡ API |
| åˆå§‹åŒ–ä»£ç  | âœ… å¯¼å…¥æ—¶æ‰§è¡Œ | âš ï¸ é™æ€å—æˆ–æ„é€ å‡½æ•° |
| å¿…éœ€æ€§ | âš ï¸ Python 2 å¿…éœ€,3.3+ å¯é€‰ | âŒ å®Œå…¨å¯é€‰ |

#### ğŸ’¡ Javaer æ³¨æ„äº‹é¡¹
- âœ… Python çš„ `__init__.py` â‰ˆ Java çš„é—¨é¢æ¨¡å¼ + é™æ€åˆå§‹åŒ–å—
- âš ï¸ `__init__.py` å¯ä»¥ä¸ºç©º,åªæ˜¯ç”¨æ¥æ ‡è¯†åŒ…
- âš ï¸ `__init__.py` ä¸­çš„ä»£ç åœ¨åŒ…è¢«å¯¼å…¥æ—¶è‡ªåŠ¨æ‰§è¡Œ
- ğŸ“Œ è®°å¿†: "`__init__.py` æ˜¯åŒ…çš„å…¥å£å’Œé…ç½®ä¸­å¿ƒ"

**ç›¸å…³æ–‡ä»¶:** `rockets/__init__.py:1-5`

---

## 6. ç›¸å¯¹å¯¼å…¥ä¸ç»å¯¹å¯¼å…¥

### 6.1 ç›¸å¯¹å¯¼å…¥ (Relative Import)

#### Python å®ç°
```python
# rockets/__init__.py ä¸­ä½¿ç”¨ç›¸å¯¹å¯¼å…¥
from .smallrocket.rocket import SmallRocket      # å½“å‰åŒ…çš„å­åŒ…
from .largerocket.rocket import LargeRocket      # å½“å‰åŒ…çš„å­åŒ…
from .launchpad.pad import Launchpad             # å½“å‰åŒ…çš„å­åŒ…

# ç‚¹å·å«ä¹‰:
# .  - å½“å‰åŒ…
# .. - çˆ¶åŒ…
# ... - çˆ¶åŒ…çš„çˆ¶åŒ…
```

#### ç»å¯¹å¯¼å…¥
```python
# ä¹Ÿå¯ä»¥ä½¿ç”¨ç»å¯¹å¯¼å…¥
from rockets.smallrocket.rocket import SmallRocket
from rockets.largerocket.rocket import LargeRocket
from rockets.launchpad.pad import Launchpad
```

#### Java å¯¹æ¯”
```java
// Java åªæœ‰ç»å¯¹å¯¼å…¥ (å…¨é™å®šå)
package com.example.rockets;

// å¯¼å…¥åŒä¸€åŒ…ä¸‹çš„ç±»
import com.example.rockets.smallrocket.SmallRocket;
import com.example.rockets.largerocket.LargeRocket;
import com.example.rockets.launchpad.Launchpad;

// Java æ²¡æœ‰ç›¸å¯¹å¯¼å…¥çš„æ¦‚å¿µ
// ä½†åŒä¸€åŒ…ä¸‹çš„ç±»å¯ä»¥ç›´æ¥ä½¿ç”¨,ä¸éœ€è¦ import
```

#### ğŸ”‘ æ ¸å¿ƒå·®å¼‚
| ç‰¹æ€§ | Python | Java |
|------|--------|------|
| ç›¸å¯¹å¯¼å…¥ | âœ… æ”¯æŒ (`.` è¡¨ç¤ºç›¸å¯¹è·¯å¾„) | âŒ ä¸æ”¯æŒ |
| ç»å¯¹å¯¼å…¥ | âœ… æ”¯æŒ | âœ… å”¯ä¸€æ–¹å¼ |
| åŒåŒ…è®¿é—® | éœ€è¦å¯¼å…¥ | è‡ªåŠ¨å¯è§ |
| çµæ´»æ€§ | é«˜ (ä¸¤ç§æ–¹å¼) | ä½ (ä»…ç»å¯¹) |

#### ğŸ’¡ Javaer æ³¨æ„äº‹é¡¹
- âš ï¸ Python æœ‰ç›¸å¯¹å¯¼å…¥ (`.module`),Java åªæœ‰ç»å¯¹å¯¼å…¥
- âœ… ç›¸å¯¹å¯¼å…¥é€‚åˆåŒ…å†…éƒ¨ä½¿ç”¨,ç»å¯¹å¯¼å…¥é€‚åˆå¤–éƒ¨ä½¿ç”¨
- âš ï¸ ç›¸å¯¹å¯¼å…¥åªèƒ½åœ¨åŒ…å†…ä½¿ç”¨,é¡¶å±‚è„šæœ¬ä¸èƒ½ä½¿ç”¨
- ğŸ“Œ è®°å¿†: "Python çš„ç‚¹å· = åŒ…çš„ç›¸å¯¹è·¯å¾„"

**æ¨èå®è·µ:**
- åŒ…å†…éƒ¨æ¨¡å—ä¹‹é—´: ä½¿ç”¨**ç›¸å¯¹å¯¼å…¥** (`.`)
- å¤–éƒ¨å¯¼å…¥åŒ…: ä½¿ç”¨**ç»å¯¹å¯¼å…¥**

**ç›¸å…³æ–‡ä»¶:** `rockets/__init__.py:1-3`

---

## 7. `__all__` å˜é‡

### 7.1 æ§åˆ¶å¯¼å‡ºå†…å®¹

#### Python å®ç°
```python
# rockets/__init__.py
from .smallrocket.rocket import SmallRocket
from .largerocket.rocket import LargeRocket
from .launchpad.pad import Launchpad

# __all__ å®šä¹‰äº† from rockets import * æ—¶å¯¼å‡ºçš„å†…å®¹
__all__ = ["SmallRocket", "LargeRocket", "Launchpad"]
```

**æ•ˆæœ:**
```python
# ä½¿ç”¨é€šé…ç¬¦å¯¼å…¥æ—¶,åªå¯¼å…¥ __all__ ä¸­åˆ—å‡ºçš„å†…å®¹
from rockets import *  # åªå¯¼å…¥ SmallRocket, LargeRocket, Launchpad

# å³ä½¿ __init__.py ä¸­è¿˜å¯¼å…¥äº†å…¶ä»–ç§æœ‰æ¨¡å—,ä¹Ÿä¸ä¼šè¢« * å¯¼å…¥
```

#### Java å¯¹æ¯”
Java æ²¡æœ‰ç›´æ¥å¯¹åº”çš„æœºåˆ¶,ä½†å¯ä»¥é€šè¿‡è®¿é—®ä¿®é¥°ç¬¦æ§åˆ¶:

```java
// RocketsAPI.java - å…¬å…± API
package com.example.rockets;

// public ç±»å¯ä»¥è¢«å¤–éƒ¨è®¿é—®
public class SmallRocket { ... }
public class LargeRocket { ... }
public class Launchpad { ... }

// package-private (é»˜è®¤) ç±»åªèƒ½åŒ…å†…è®¿é—®
class InternalHelper { ... }  // å¤–éƒ¨ä¸å¯è§
```

```java
// ä½¿ç”¨é€šé…ç¬¦å¯¼å…¥
import com.example.rockets.*;
// åªèƒ½è®¿é—® public ç±»,package-private ç±»ä¸å¯è§
```

#### ğŸ”‘ æ ¸å¿ƒå·®å¼‚
| ç‰¹æ€§ | Python `__all__` | Java è®¿é—®ä¿®é¥°ç¬¦ |
|------|-----------------|----------------|
| æ§åˆ¶å¯¼å‡º | âœ… `__all__` åˆ—è¡¨ | âœ… `public` ä¿®é¥°ç¬¦ |
| é€šé…ç¬¦å¯¼å…¥ | `from module import *` | `import package.*` |
| é»˜è®¤è¡Œä¸º | å¯¼å‡ºæ‰€æœ‰éä¸‹åˆ’çº¿å¼€å¤´çš„åç§° | åªå¯¼å‡º public ç±» |
| çµæ´»æ€§ | é«˜ (è¿è¡Œæ—¶æ§åˆ¶) | ä½ (ç¼–è¯‘æ—¶æ§åˆ¶) |

#### ğŸ’¡ Javaer æ³¨æ„äº‹é¡¹
- âœ… Python çš„ `__all__` â‰ˆ Java çš„ `public` ä¿®é¥°ç¬¦
- âš ï¸ `__all__` åªå½±å“ `from module import *`,ä¸å½±å“ç›´æ¥å¯¼å…¥
- âš ï¸ å¦‚æœæ²¡æœ‰ `__all__`,`import *` ä¼šå¯¼å…¥æ‰€æœ‰éä¸‹åˆ’çº¿å¼€å¤´çš„åç§°
- ğŸ“Œ è®°å¿†: "`__all__` æ˜¯æ¨¡å—çš„å…¬å…± API å£°æ˜"

**æœ€ä½³å®è·µ:**
- âœ… æ€»æ˜¯å®šä¹‰ `__all__`,æ˜ç¡®å…¬å…± API
- âŒ é¿å…ä½¿ç”¨ `from module import *`
- âœ… ä½¿ç”¨ `__all__` æé«˜ä»£ç å¯ç»´æŠ¤æ€§

**ç›¸å…³æ–‡ä»¶:** `rockets/__init__.py:5`

---

## 8. é¡¹ç›®ç»“æ„æœ€ä½³å®è·µ

### 8.1 å…¸å‹ Python é¡¹ç›®ç»“æ„

#### Python é¡¹ç›®ç¤ºä¾‹
```
my_project/                 # é¡¹ç›®æ ¹ç›®å½•
â”œâ”€â”€ README.md              # é¡¹ç›®è¯´æ˜
â”œâ”€â”€ requirements.txt       # ä¾èµ–åˆ—è¡¨
â”œâ”€â”€ setup.py               # å®‰è£…é…ç½®
â”œâ”€â”€ tests/                 # æµ‹è¯•ç›®å½•
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ test_module1.py
â”‚   â””â”€â”€ test_module2.py
â”œâ”€â”€ docs/                  # æ–‡æ¡£ç›®å½•
â”‚   â””â”€â”€ ...
â””â”€â”€ my_package/            # ä¸»åŒ…
    â”œâ”€â”€ __init__.py        # åŒ…åˆå§‹åŒ–
    â”œâ”€â”€ module1.py         # æ¨¡å— 1
    â”œâ”€â”€ module2.py         # æ¨¡å— 2
    â””â”€â”€ subpackage/        # å­åŒ…
        â”œâ”€â”€ __init__.py
        â””â”€â”€ module3.py
```

#### Java é¡¹ç›®å¯¹æ¯” (Maven ç»“æ„)
```
my-project/                          # é¡¹ç›®æ ¹ç›®å½•
â”œâ”€â”€ README.md                       # é¡¹ç›®è¯´æ˜
â”œâ”€â”€ pom.xml                         # Maven é…ç½®
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main/
â”‚   â”‚   â”œâ”€â”€ java/                   # Java æºç 
â”‚   â”‚   â”‚   â””â”€â”€ com/example/myproject/
â”‚   â”‚   â”‚       â”œâ”€â”€ Module1.java
â”‚   â”‚   â”‚       â”œâ”€â”€ Module2.java
â”‚   â”‚   â”‚       â””â”€â”€ subpackage/
â”‚   â”‚   â”‚           â””â”€â”€ Module3.java
â”‚   â”‚   â””â”€â”€ resources/              # èµ„æºæ–‡ä»¶
â”‚   â””â”€â”€ test/
â”‚       â”œâ”€â”€ java/                   # æµ‹è¯•ä»£ç 
â”‚       â”‚   â””â”€â”€ com/example/myproject/
â”‚       â”‚       â”œâ”€â”€ Module1Test.java
â”‚       â”‚       â””â”€â”€ Module2Test.java
â”‚       â””â”€â”€ resources/              # æµ‹è¯•èµ„æº
â””â”€â”€ target/                         # ç¼–è¯‘è¾“å‡º
```

#### ğŸ”‘ æ ¸å¿ƒå·®å¼‚
| ç‰¹æ€§ | Python | Java (Maven) |
|------|--------|--------------|
| é…ç½®æ–‡ä»¶ | `setup.py`, `requirements.txt` | `pom.xml`, `build.gradle` |
| æºç ä½ç½® | é¡¹ç›®æ ¹ç›®å½•æˆ– `src/` | `src/main/java/` |
| æµ‹è¯•ä½ç½® | `tests/` ç›®å½• | `src/test/java/` |
| èµ„æºæ–‡ä»¶ | ä¸ä»£ç æ··åˆ | `src/main/resources/` |
| åŒ…ç»“æ„ | æ‰å¹³åŒ– | æ·±å±‚åµŒå¥— (åŸŸååè½¬) |

#### ğŸ’¡ Javaer æ³¨æ„äº‹é¡¹
- âš ï¸ Python é¡¹ç›®ç»“æ„æ›´æ‰å¹³,Java æ›´æ·±å±‚
- âœ… Python çš„ `tests/` â‰ˆ Java çš„ `src/test/java/`
- âš ï¸ Python é€šå¸¸ä¸ç”¨åŸŸååè½¬çš„åŒ…å‘½å (ä¸éœ€è¦ `com.example`)
- ğŸ“Œ è®°å¿†: "Python æ›´ç®€æ´,Java æ›´è§„èŒƒ"

### 8.2 å¯¼å…¥æœ€ä½³å®è·µå¯¹æ¯”

#### Python
```python
# âœ… æ¨è: ä½¿ç”¨ç»å¯¹å¯¼å…¥
from my_package.module1 import MyClass

# âœ… æ¨è: ä½¿ç”¨åˆ«åé¿å…å†²çª
import numpy as np
import pandas as pd

# âš ï¸ è°¨æ…: ç›¸å¯¹å¯¼å…¥ (ä»…åŒ…å†…éƒ¨)
from .module2 import helper_function

# âŒ é¿å…: é€šé…ç¬¦å¯¼å…¥
from module import *  # å¯èƒ½å¯¼è‡´å‘½åå†²çª
```

#### Java
```java
// âœ… æ¨è: æ˜ç¡®å¯¼å…¥
import com.example.myproject.MyClass;

// âœ… æ¨è: é™æ€å¯¼å…¥å·¥å…·æ–¹æ³•
import static com.example.myproject.Utils.helperMethod;

// âš ï¸ è°¨æ…: é€šé…ç¬¦å¯¼å…¥
import com.example.myproject.*;  // IDE ä¼šè‡ªåŠ¨å±•å¼€

// âŒ é¿å…: ä¸å¿…è¦çš„å¯¼å…¥
import java.lang.String;  // java.lang è‡ªåŠ¨å¯¼å…¥
```

---

## 9. å®Œæ•´ç¤ºä¾‹: ä½¿ç”¨åŒ…

### 9.1 Python å®Œæ•´ç¤ºä¾‹

#### æ–‡ä»¶ç»“æ„
```
Ch04/
â”œâ”€â”€ rockets/
â”‚   â”œâ”€â”€ __init__.py         # åŒ…åˆå§‹åŒ–
â”‚   â”œâ”€â”€ smallrocket/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ rocket.py       # SmallRocket ç±»
â”‚   â””â”€â”€ launchpad/
â”‚       â”œâ”€â”€ __init__.py
â”‚       â””â”€â”€ pad.py          # Launchpad ç±»
â””â”€â”€ rocket_usage.py         # ä½¿ç”¨ç¤ºä¾‹
```

#### ä»£ç å®ç°
```python
# rockets/__init__.py
from .smallrocket.rocket import SmallRocket
from .launchpad.pad import Launchpad
__all__ = ["SmallRocket", "Launchpad"]

# rockets/smallrocket/rocket.py
class SmallRocket:
    def launch(self):
        print("whoosh")

# rockets/launchpad/pad.py
class Launchpad:
    def __init__(self, rocket):
        self.rocket = rocket

    def launch(self):
        self.rocket.launch()

# rocket_usage.py
from rockets import SmallRocket, Launchpad

pad = Launchpad(SmallRocket())
pad.launch()  # è¾“å‡º: whoosh
```

### 9.2 Java ç­‰ä»·å®ç°

#### æ–‡ä»¶ç»“æ„
```
src/main/java/com/example/
â”œâ”€â”€ rockets/
â”‚   â”œâ”€â”€ Rockets.java           # é—¨é¢ç±» (å¯é€‰)
â”‚   â”œâ”€â”€ smallrocket/
â”‚   â”‚   â””â”€â”€ SmallRocket.java
â”‚   â””â”€â”€ launchpad/
â”‚       â””â”€â”€ Launchpad.java
â””â”€â”€ RocketUsage.java           # ä½¿ç”¨ç¤ºä¾‹
```

#### ä»£ç å®ç°
```java
// rockets/smallrocket/SmallRocket.java
package com.example.rockets.smallrocket;

public class SmallRocket {
    public void launch() {
        System.out.println("whoosh");
    }
}

// rockets/launchpad/Launchpad.java
package com.example.rockets.launchpad;

public class Launchpad {
    private Object rocket;

    public Launchpad(Object rocket) {
        this.rocket = rocket;
    }

    public void launch() {
        if (rocket instanceof com.example.rockets.smallrocket.SmallRocket) {
            ((com.example.rockets.smallrocket.SmallRocket) rocket).launch();
        }
    }
}

// RocketUsage.java
package com.example;

import com.example.rockets.smallrocket.SmallRocket;
import com.example.rockets.launchpad.Launchpad;

public class RocketUsage {
    public static void main(String[] args) {
        Launchpad pad = new Launchpad(new SmallRocket());
        pad.launch();  // è¾“å‡º: whoosh
    }
}
```

**ç›¸å…³æ–‡ä»¶:** `rocket_usage.py`, `rockets/` åŒ…

---

## 10. æ€»ç»“å¯¹æ¯”è¡¨

### Python vs Java æ¨¡å—ç³»ç»Ÿ

| ç‰¹æ€§ | Python | Java |
|------|--------|------|
| **åŸºæœ¬å•ä½** | æ¨¡å— (`.py` æ–‡ä»¶) | ç±» (`.java` æ–‡ä»¶) |
| **åŒ…æ ‡è¯†** | `__init__.py` æ–‡ä»¶ | `package` å£°æ˜ |
| **å¯¼å…¥æ–¹å¼** | `import`, `from...import` | `import` |
| **åˆ«åæ”¯æŒ** | âœ… `import x as y` | âŒ ä¸æ”¯æŒ |
| **ç›¸å¯¹å¯¼å…¥** | âœ… æ”¯æŒ (`.module`) | âŒ ä¸æ”¯æŒ |
| **å¯¼å‡ºæ§åˆ¶** | `__all__` åˆ—è¡¨ | è®¿é—®ä¿®é¥°ç¬¦ |
| **åŒ…åˆå§‹åŒ–** | `__init__.py` ä»£ç  | é™æ€åˆå§‹åŒ–å— |
| **å‘½åçº¦å®š** | å°å†™,ä¸‹åˆ’çº¿ | å°å†™,ç‚¹å· |
| **é¡¹ç›®ç»“æ„** | æ‰å¹³åŒ– | æ·±å±‚åµŒå¥— |
| **é…ç½®ç®¡ç†** | `setup.py`, `requirements.txt` | `pom.xml`, `build.gradle` |

---

## 11. å­¦ä¹ è·¯å¾„å»ºè®®

1. **ç†è§£æ¨¡å—æ¦‚å¿µ** - Python æ–‡ä»¶å³æ¨¡å—
2. **æŒæ¡å¯¼å…¥æ–¹å¼** - `import` vs `from...import`
3. **å­¦ä¹ åŒ…ç»“æ„** - `__init__.py` çš„ä½œç”¨
4. **å®è·µç›¸å¯¹å¯¼å…¥** - åŒ…å†…éƒ¨ä½¿ç”¨
5. **ä½¿ç”¨ `__all__`** - æ˜ç¡®å…¬å…± API
6. **å¯¹æ¯” Java** - å»ºç«‹å¿ƒæ™ºæ¨¡å‹

---

## 12. å¸¸è§é—®é¢˜ (Javaer è§†è§’)

### Q1: Python çš„æ¨¡å—ç­‰äº Java çš„ä»€ä¹ˆ?
**A:** Python æ¨¡å— â‰ˆ Java çš„ç±»æ–‡ä»¶,ä½†æ›´çµæ´»ã€‚ä¸€ä¸ª Python æ¨¡å—å¯ä»¥åŒ…å«å¤šä¸ªç±»å’Œå‡½æ•°,è€Œ Java ä¸€ä¸ªæ–‡ä»¶åªèƒ½æœ‰ä¸€ä¸ª public ç±»ã€‚

### Q2: `__init__.py` å¿…é¡»è¦æœ‰å—?
**A:** Python 2 å¿…é¡»æœ‰,Python 3.3+ å¯ä»¥æ˜¯éšå¼åŒ… (æ²¡æœ‰ `__init__.py`)ã€‚ä½†æ¨èå§‹ç»ˆåˆ›å»º,ç”¨äºåŒ…åˆå§‹åŒ–å’Œå¯¼å‡ºæ§åˆ¶ã€‚

### Q3: ç›¸å¯¹å¯¼å…¥å’Œç»å¯¹å¯¼å…¥å“ªä¸ªå¥½?
**A:**
- **åŒ…å†…éƒ¨**: ä½¿ç”¨ç›¸å¯¹å¯¼å…¥ (`.module`),æ›´çµæ´»
- **åŒ…å¤–éƒ¨**: ä½¿ç”¨ç»å¯¹å¯¼å…¥,æ›´æ¸…æ™°

### Q4: `from module import *` ä¸ºä»€ä¹ˆä¸æ¨è?
**A:** å¯èƒ½å¯¼è‡´å‘½åå†²çª,ä¸æ¸…æ¥šå¯¼å…¥äº†ä»€ä¹ˆ,ç±»ä¼¼ Java çš„ `import package.*`ã€‚æ¨èæ˜ç¡®å¯¼å…¥éœ€è¦çš„å†…å®¹ã€‚

### Q5: Python åŒ…å‘½åéœ€è¦éµå¾ªåŸŸååè½¬å—?
**A:** ä¸éœ€è¦ã€‚Python åŒ…åé€šå¸¸ç®€çŸ­ã€å°å†™,ç”¨ä¸‹åˆ’çº¿åˆ†éš” (å¦‚ `my_package`),ä¸åƒ Java çš„ `com.example.myproject`ã€‚

---

## ğŸ“Š å‚è€ƒæ–‡ä»¶ç´¢å¼•

| ä¸»é¢˜ | æ–‡ä»¶å |
|------|--------|
| æ¨¡å—å®šä¹‰ | `smart_door.py` |
| æ¨¡å—å¯¼å…¥ | `use_smart_door.py` |
| `__name__` å±æ€§ | `example.py`, `testpkg/awesome.py` |
| åŒ…ç»“æ„ | `rockets/` ç›®å½• |
| `__init__.py` | `rockets/__init__.py` |
| åŒ…ä½¿ç”¨ | `rocket_usage.py` |

---

**åˆ¶ä½œæ—¶é—´:** 2025-11-25
**åŸºäº:** DeadSimplePython Chapter 04 ç¤ºä¾‹ä»£ç 
**è§„èŒƒå‚è€ƒ:** `Pythonå­¦ä¹ ç¬”è®°è§„èŒƒ_for_Javaer.md`