# Chapter 14 - å…ƒç±»ä¸æŠ½è±¡åŸºç±» (Metaclasses and Abstract Base Classes)

> **æœ¬ç« ä¸»é¢˜**: Python çš„å…ƒç¼–ç¨‹å’ŒæŠ½è±¡åŸºç±»
> **é¢å‘**: æœ‰ Java å¼€å‘ç»éªŒçš„å­¦ä¹ è€…

---

## æ ¸å¿ƒçŸ¥è¯†ç‚¹

### 1. æŠ½è±¡åŸºç±» (ABC)

#### Python å®ç°
```python
from abc import ABC, abstractmethod

class Animal(ABC):
    @abstractmethod
    def speak(self):
        pass

    @abstractmethod
    def move(self):
        pass

class Dog(Animal):
    def speak(self):
        return "Woof"

    def move(self):
        return "Running"

# å®ä¾‹åŒ–æŠ½è±¡ç±»ä¼šæŠ¥é”™
# animal = Animal()  # TypeError

dog = Dog()  # å¿…é¡»å®ç°æ‰€æœ‰æŠ½è±¡æ–¹æ³•
```

#### Java å¯¹æ¯”
```java
// Java æŠ½è±¡ç±»
abstract class Animal {
    public abstract String speak();
    public abstract String move();
}

class Dog extends Animal {
    @Override
    public String speak() {
        return "Woof";
    }

    @Override
    public String move() {
        return "Running";
    }
}

// Animal animal = new Animal();  // ç¼–è¯‘é”™è¯¯
Dog dog = new Dog();
```

#### ğŸ’¡ Javaer æ³¨æ„äº‹é¡¹
- âœ… Python ABC â‰ˆ Java abstract class
- âš ï¸ ä½¿ç”¨ `@abstractmethod` è£…é¥°å™¨æ ‡è®°æŠ½è±¡æ–¹æ³•
- ğŸ“Œ è®°å¿†: "ABC = å¼ºåˆ¶å­ç±»å®ç°æ–¹æ³•"

**ç›¸å…³æ–‡ä»¶:** `cafe_queue_abc.py`

---

### 2. å…ƒç±» (Metaclass)

#### Python å®ç°


```python
# å…ƒç±»: ç±»çš„ç±»
class Meta(type):
    def __new__(mcs, name, bases, attrs):
        print(f"Creating class {name}")
        attrs['class_id'] = id(mcs)
        return super().__new__(mcs, name, bases, attrs)

class MyClass(metaclass=Meta):
    pass

# è¾“å‡º: Creating class MyClass
obj = MyClass()
print(obj.class_id)
```


#### Java å¯¹æ¯”
Java æ²¡æœ‰å…ƒç±»æ¦‚å¿µ,ä½†å¯ä»¥ç”¨åå°„:

```java
// Java åå°„
Class<?> clazz = MyClass.class;
System.out.println("Class name: " + clazz.getName());

// åŠ¨æ€åˆ›å»ºç±»éœ€è¦ cglib æˆ– ByteBuddy ç­‰åº“
```

#### ğŸ’¡ Javaer æ³¨æ„äº‹é¡¹
- âš ï¸ å…ƒç±»æ˜¯ Python é«˜çº§ç‰¹æ€§,Java æ— ç›´æ¥å¯¹åº”
- âš ï¸ å…ƒç±»ç”¨äºæ§åˆ¶ç±»çš„åˆ›å»ºè¿‡ç¨‹
- ğŸ“Œ è®°å¿†: "å…ƒç±» = ç±»çš„æ¨¡æ¿"

**ç›¸å…³æ–‡ä»¶:** `metaclass.py`

---

## æ€»ç»“

| ç‰¹æ€§ | Python | Java |
|------|--------|------|
| æŠ½è±¡ç±» | `ABC` + `@abstractmethod` | `abstract class` |
| å…ƒç±» | `metaclass` | åå°„ (éƒ¨åˆ†åŠŸèƒ½) |

---

**åˆ¶ä½œæ—¶é—´:** 2025-11-25
**åŸºäº:** DeadSimplePython Chapter 14 ç¤ºä¾‹ä»£ç 
