# Chapter 11 - æ–‡ä»¶ I/O ä¸è·¯å¾„ (File I/O and Paths)

> **æœ¬ç« ä¸»é¢˜**: Python çš„æ–‡ä»¶æ“ä½œå’Œè·¯å¾„å¤„ç†
> **é¢å‘**: æœ‰ Java å¼€å‘ç»éªŒçš„å­¦ä¹ è€…

---

## æ ¸å¿ƒçŸ¥è¯†ç‚¹

### 1. æ–‡ä»¶è¯»å– - with è¯­å¥

#### Python å®ç°
```python
# æ¨è: ä½¿ç”¨ with è¯­å¥ (è‡ªåŠ¨å…³é—­æ–‡ä»¶)
with open("file.txt", "r") as file:
    content = file.read()
    print(content)

# ä¸æ¨è: æ‰‹åŠ¨å…³é—­
file = open("file.txt", "r")
try:
    content = file.read()
finally:
    file.close()
```

#### Java å¯¹æ¯”
```java
// Java - try-with-resources (Java 7+)
try (BufferedReader reader = new BufferedReader(new FileReader("file.txt"))) {
    String content = reader.lines().collect(Collectors.joining("\n"));
    System.out.println(content);
}

// ä¼ ç»Ÿæ–¹å¼
BufferedReader reader = null;
try {
    reader = new BufferedReader(new FileReader("file.txt"));
    // è¯»å–æ–‡ä»¶...
} finally {
    if (reader != null) reader.close();
}
```

#### ğŸ”‘ æ ¸å¿ƒå·®å¼‚
| ç‰¹æ€§ | Python with | Java try-with-resources |
|------|-------------|------------------------|
| è¯­æ³• | `with open() as f:` | `try (Reader r = ...)` |
| è‡ªåŠ¨å…³é—­ | âœ… è‡ªåŠ¨ | âœ… è‡ªåŠ¨ |
| èµ„æºç®¡ç† | ä¸Šä¸‹æ–‡ç®¡ç†å™¨ | AutoCloseable æ¥å£ |

#### ğŸ’¡ Javaer æ³¨æ„äº‹é¡¹
- âœ… `with` è¯­å¥ â‰ˆ Java çš„ `try-with-resources`
- âš ï¸ `with` å¯ç”¨äºä»»ä½•ä¸Šä¸‹æ–‡ç®¡ç†å™¨,ä¸ä»…æ˜¯æ–‡ä»¶
- ğŸ“Œ è®°å¿†: "with = è‡ªåŠ¨èµ„æºç®¡ç†"

**ç›¸å…³æ–‡ä»¶:** `read_house_open.py:7-8`

---

### 2. è·¯å¾„æ“ä½œ - pathlib

#### Python å®ç°
```python
from pathlib import Path

# åˆ›å»ºè·¯å¾„å¯¹è±¡
path = Path.home() / '.bash_history'
# æˆ–
path = Path('~/.bash_history').expanduser()

# è·¯å¾„æ“ä½œ
print(path.exists())      # æ£€æŸ¥å­˜åœ¨
print(path.is_file())     # æ˜¯å¦æ˜¯æ–‡ä»¶
print(path.parent)        # çˆ¶ç›®å½•
print(path.name)          # æ–‡ä»¶å
print(path.stem)          # æ–‡ä»¶å(æ— æ‰©å±•å)
print(path.suffix)        # æ‰©å±•å

# è¯»å–æ–‡ä»¶
with path.open('r') as file:
    content = file.read()
```

#### Java å¯¹æ¯”
```java
// Java - Path å’Œ Files (Java 7+)
import java.nio.file.*;

Path path = Paths.get(System.getProperty("user.home"), ".bash_history");

// è·¯å¾„æ“ä½œ
System.out.println(Files.exists(path));
System.out.println(Files.isRegularFile(path));
System.out.println(path.getParent());
System.out.println(path.getFileName());
// è·å–æ‰©å±•åéœ€è¦æ‰‹åŠ¨å¤„ç†
String fileName = path.getFileName().toString();
String extension = fileName.substring(fileName.lastIndexOf('.'));

// è¯»å–æ–‡ä»¶
String content = Files.readString(path);
```

#### ğŸ”‘ æ ¸å¿ƒå·®å¼‚
| ç‰¹æ€§ | Python Path | Java Path |
|------|-------------|-----------|
| è·¯å¾„æ‹¼æ¥ | `/` è¿ç®—ç¬¦ | `Paths.get()` æˆ– `path.resolve()` |
| ä¸»ç›®å½• | `Path.home()` | `System.getProperty("user.home")` |
| å±•å¼€ ~ | `expanduser()` | æ‰‹åŠ¨æ›¿æ¢ |
| API é£æ ¼ | é¢å‘å¯¹è±¡ | é™æ€æ–¹æ³• (Files ç±») |

#### ğŸ’¡ Javaer æ³¨æ„äº‹é¡¹
- âœ… Python `pathlib` â‰ˆ Java `java.nio.file.Path`
- âš ï¸ **Python ç”¨ `/` æ‹¼æ¥è·¯å¾„**,éå¸¸ä¼˜é›…: `dir / 'file.txt'`
- âš ï¸ Python è·¯å¾„æ˜¯å¯¹è±¡,æ–¹æ³•åœ¨å¯¹è±¡ä¸Š;Java ç”¨ Files é™æ€ç±»
- ğŸ“Œ è®°å¿†: "pathlib = é¢å‘å¯¹è±¡çš„è·¯å¾„æ“ä½œ"

**ç›¸å…³æ–‡ä»¶:** `read_from_path.py:1-11`

---

### 3. JSON å¤„ç†

#### Python å®ç°
```python
import json

# è¯»å– JSON
with open('data.json', 'r') as file:
    data = json.load(file)

# å†™å…¥ JSON
with open('output.json', 'w') as file:
    json.dump(data, file, indent=2)

# å­—ç¬¦ä¸²ä¸JSONäº’è½¬
json_str = json.dumps({'name': 'Alice', 'age': 25})
obj = json.loads(json_str)
```

#### Java å¯¹æ¯”
```java
// Java - ä½¿ç”¨ Gson æˆ– Jackson
import com.google.gson.Gson;

// è¯»å– JSON
Gson gson = new Gson();
Reader reader = Files.newBufferedReader(Paths.get("data.json"));
MyData data = gson.fromJson(reader, MyData.class);

// å†™å…¥ JSON
Writer writer = Files.newBufferedWriter(Paths.get("output.json"));
gson.toJson(data, writer);
writer.close();

// å­—ç¬¦ä¸²ä¸JSONäº’è½¬
String jsonStr = gson.toJson(Map.of("name", "Alice", "age", 25));
Map obj = gson.fromJson(jsonStr, Map.class);
```

#### ğŸ’¡ Javaer æ³¨æ„äº‹é¡¹
- âœ… Python `json` æ¨¡å— â‰ˆ Java çš„ Gson/Jackson
- âš ï¸ Python å†…ç½® JSON æ”¯æŒ,Java éœ€è¦ç¬¬ä¸‰æ–¹åº“
- âš ï¸ `json.load()` ä»æ–‡ä»¶è¯»,`json.loads()` ä»å­—ç¬¦ä¸²è¯»
- ğŸ“Œ è®°å¿†: "load = ä»æ–‡ä»¶,loads = ä»å­—ç¬¦ä¸²"

**ç›¸å…³æ–‡ä»¶:** `read_house_json.py:1-9`

---

### 4. æ ‡å‡†æµ - stdin/stdout/stderr

#### Python å®ç°
```python
import sys

# è¯»å–æ ‡å‡†è¾“å…¥
for line in sys.stdin:
    print(line.strip())

# å†™å…¥æ ‡å‡†è¾“å‡º
sys.stdout.write("Message\n")
print("Message")  # ç­‰ä»·

# å†™å…¥æ ‡å‡†é”™è¯¯
sys.stderr.write("Error!\n")
print("Error!", file=sys.stderr)
```

#### Java å¯¹æ¯”
```java
// è¯»å–æ ‡å‡†è¾“å…¥
Scanner scanner = new Scanner(System.in);
while (scanner.hasNextLine()) {
    String line = scanner.nextLine();
    System.out.println(line);
}

// å†™å…¥æ ‡å‡†è¾“å‡º
System.out.println("Message");

// å†™å…¥æ ‡å‡†é”™è¯¯
System.err.println("Error!");
```

#### ğŸ’¡ Javaer æ³¨æ„äº‹é¡¹
- âœ… Python `sys.stdin/stdout/stderr` = Java `System.in/out/err`
- âš ï¸ `print(msg, file=sys.stderr)` å¯ä»¥é‡å®šå‘è¾“å‡º
- ğŸ“Œ è®°å¿†: "sys æ¨¡å—æä¾›ç³»ç»Ÿçº§I/O"

**ç›¸å…³æ–‡ä»¶:** `print_error.py`

---

## æ€»ç»“

| ç‰¹æ€§ | Python | Java |
|------|--------|------|
| æ–‡ä»¶æ‰“å¼€ | `open()` / `Path.open()` | `FileReader` / `Files` |
| èµ„æºç®¡ç† | `with` è¯­å¥ | `try-with-resources` |
| è·¯å¾„æ“ä½œ | `pathlib.Path` | `java.nio.file.Path` |
| è·¯å¾„æ‹¼æ¥ | `/` è¿ç®—ç¬¦ | `Paths.get()` |
| JSON | å†…ç½® `json` æ¨¡å— | Gson/Jackson åº“ |
| æ ‡å‡†æµ | `sys.stdin/out/err` | `System.in/out/err` |

---

**åˆ¶ä½œæ—¶é—´:** 2025-11-25
**åŸºäº:** DeadSimplePython Chapter 11 ç¤ºä¾‹ä»£ç 
**è§„èŒƒå‚è€ƒ:** `Pythonå­¦ä¹ ç¬”è®°è§„èŒƒ_for_Javaer.md`
