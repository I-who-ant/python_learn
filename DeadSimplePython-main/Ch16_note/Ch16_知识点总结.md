# Chapter 16 - å¼‚æ­¥ç¼–ç¨‹ (Asynchronous Programming)

> **æœ¬ç« ä¸»é¢˜**: Python çš„ async/await å¼‚æ­¥ç¼–ç¨‹
> **é¢å‘**: æœ‰ Java å¼€å‘ç»éªŒçš„å­¦ä¹ è€…

---

## æ ¸å¿ƒçŸ¥è¯†ç‚¹

### 1. async/await åŸºç¡€

#### Python å®ç°
```python
import asyncio

# å¼‚æ­¥å‡½æ•°
async def fetch_data(url):
    print(f"Fetching {url}")
    await asyncio.sleep(1)  # æ¨¡æ‹Ÿ I/O æ“ä½œ
    return f"Data from {url}"

# è¿è¡Œå¼‚æ­¥å‡½æ•°
async def main():
    result = await fetch_data("https://api.example.com")
    print(result)

# å¯åŠ¨äº‹ä»¶å¾ªç¯
asyncio.run(main())
```

#### Java å¯¹æ¯”
```java
// Java - CompletableFuture
import java.util.concurrent.*;

CompletableFuture<String> fetchData(String url) {
    return CompletableFuture.supplyAsync(() -> {
        System.out.println("Fetching " + url);
        try {
            Thread.sleep(1000);
        } catch (InterruptedException e) {
            throw new RuntimeException(e);
        }
        return "Data from " + url;
    });
}

// ä½¿ç”¨
CompletableFuture<String> future = fetchData("https://api.example.com");
String result = future.get();  // é˜»å¡ç­‰å¾…
System.out.println(result);
```

#### ğŸ’¡ Javaer æ³¨æ„äº‹é¡¹
- âœ… Python `async/await` â‰ˆ Java `CompletableFuture`
- âš ï¸ Python å¼‚æ­¥æ˜¯å•çº¿ç¨‹çš„(åç¨‹),Java æ˜¯å¤šçº¿ç¨‹çš„
- âš ï¸ `await` æš‚åœåç¨‹,ä¸é˜»å¡çº¿ç¨‹
- ğŸ“Œ è®°å¿†: "async/await = åç¨‹å¼å¼‚æ­¥"

**ç›¸å…³æ–‡ä»¶:** `collatz_async.py`

---

### 2. å¹¶å‘æ‰§è¡Œå¤šä¸ªä»»åŠ¡

#### Python å®ç°
```python
import asyncio

async def task(name, delay):
    await asyncio.sleep(delay)
    return f"Task {name} done"

async def main():
    # å¹¶å‘æ‰§è¡Œå¤šä¸ªä»»åŠ¡
    results = await asyncio.gather(
        task("A", 1),
        task("B", 2),
        task("C", 1)
    )
    print(results)

asyncio.run(main())
```

#### Java å¯¹æ¯”
```java
CompletableFuture<String> task(String name, int delay) {
    return CompletableFuture.supplyAsync(() -> {
        Thread.sleep(delay * 1000);
        return "Task " + name + " done";
    });
}

// å¹¶å‘æ‰§è¡Œ
CompletableFuture<Void> all = CompletableFuture.allOf(
    task("A", 1),
    task("B", 2),
    task("C", 1)
);
all.join();
```

#### ğŸ’¡ Javaer æ³¨æ„äº‹é¡¹
- âœ… `asyncio.gather()` â‰ˆ `CompletableFuture.allOf()`
- ğŸ“Œ è®°å¿†: "gather = å¹¶å‘ç­‰å¾…æ‰€æœ‰ä»»åŠ¡"

---

## æ€»ç»“

| ç‰¹æ€§ | Python | Java |
|------|--------|------|
| å¼‚æ­¥è¯­æ³• | `async/await` | `CompletableFuture` |
| å¹¶å‘æ¨¡å‹ | åç¨‹ (å•çº¿ç¨‹) | çº¿ç¨‹æ±  (å¤šçº¿ç¨‹) |
| äº‹ä»¶å¾ªç¯ | `asyncio.run()` | `ExecutorService` |

---

**åˆ¶ä½œæ—¶é—´:** 2025-11-25
**åŸºäº:** DeadSimplePython Chapter 16 ç¤ºä¾‹ä»£ç 
