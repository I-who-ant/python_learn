# Chapter 15 - ç±»å‹æ³¨è§£ (Type Annotations)

> **æœ¬ç« ä¸»é¢˜**: Python çš„ç±»å‹æç¤ºç³»ç»Ÿ
> **é¢å‘**: æœ‰ Java å¼€å‘ç»éªŒçš„å­¦ä¹ è€…

---

## æ ¸å¿ƒçŸ¥è¯†ç‚¹

### 1. åŸºç¡€ç±»å‹æ³¨è§£

#### Python å®ç°


```python
# å˜é‡ç±»å‹æ³¨è§£
name: str = "Alice"
age: int = 25
price: float = 19.99
is_active: bool = True

# å‡½æ•°ç±»å‹æ³¨è§£
def greet(name: str) -> str:
    return f"Hello, {name}"

# åˆ—è¡¨ã€å­—å…¸æ³¨è§£
from typing import List, Dict

names: List[str] = ["Alice", "Bob"]
scores: Dict[str, int] = {"Alice": 95, "Bob": 87}
```


#### Java å¯¹æ¯”
```java
// Java é™æ€ç±»å‹ (ç¼–è¯‘æ—¶æ£€æŸ¥)
String name = "Alice";
int age = 25;
double price = 19.99;
boolean isActive = true;

// æ–¹æ³•ç±»å‹å£°æ˜
public String greet(String name) {
    return "Hello, " + name;
}

// æ³›å‹
List<String> names = List.of("Alice", "Bob");
Map<String, Integer> scores = Map.of("Alice", 95, "Bob", 87);
```

#### ğŸ”‘ æ ¸å¿ƒå·®å¼‚
| ç‰¹æ€§ | Python ç±»å‹æ³¨è§£ | Java ç±»å‹ç³»ç»Ÿ |
|------|----------------|--------------|
| æ£€æŸ¥æ—¶æœº | è¿è¡Œæ—¶ (å¯é€‰å·¥å…·æ£€æŸ¥) | ç¼–è¯‘æ—¶ |
| å¼ºåˆ¶æ€§ | å¯é€‰ | å¿…éœ€ |
| å·¥å…· | mypy, pyright | javac |

#### ğŸ’¡ Javaer æ³¨æ„äº‹é¡¹
- âš ï¸ **Python ç±»å‹æ³¨è§£æ˜¯å¯é€‰çš„**,ä¸å¼ºåˆ¶
- âš ï¸ ç±»å‹æ³¨è§£ä¸å½±å“è¿è¡Œæ—¶æ€§èƒ½
- âœ… ä½¿ç”¨ mypy å·¥å…·è¿›è¡Œé™æ€ç±»å‹æ£€æŸ¥
- ğŸ“Œ è®°å¿†: "ç±»å‹æ³¨è§£ = æ–‡æ¡£ + å·¥å…·æ£€æŸ¥"

**ç›¸å…³æ–‡ä»¶:** `element.py`

---

### 2. é«˜çº§ç±»å‹æ³¨è§£

#### Python å®ç°
```python
from typing import Optional, Union, List, Tuple

# Optional: å¯èƒ½ä¸º None
def find_user(id: int) -> Optional[str]:
    if id > 0:
        return "Alice"
    return None

# Union: å¤šç§ç±»å‹ä¹‹ä¸€
def process(value: Union[int, str]) -> str:
    return str(value)

# å…ƒç»„ç±»å‹
point: Tuple[float, float] = (1.0, 2.0)

# æ³›å‹
from typing import TypeVar, Generic

T = TypeVar('T')

class Box(Generic[T]):
    def __init__(self, content: T):
        self.content = content

box: Box[int] = Box(42)
```

#### Java å¯¹æ¯”
```java
// Java Optional
Optional<String> findUser(int id) {
    if (id > 0) {
        return Optional.of("Alice");
    }
    return Optional.empty();
}

// Java æ²¡æœ‰ Union ç±»å‹,éœ€è¦ç”¨çˆ¶ç±»å‹æˆ– Object
Object process(Object value) {
    return value.toString();
}

// æ³›å‹
class Box<T> {
    private T content;

    public Box(T content) {
        this.content = content;
    }
}

Box<Integer> box = new Box<>(42);
```

#### ğŸ’¡ Javaer æ³¨æ„äº‹é¡¹
- âœ… `Optional[T]` â‰ˆ Java `Optional<T>`
- âš ï¸ `Union[A, B]` åœ¨ Java ä¸­æ— ç›´æ¥å¯¹åº”
- âœ… Python æ³›å‹ â‰ˆ Java æ³›å‹
- ğŸ“Œ è®°å¿†: "ç±»å‹æ³¨è§£è®© Python æ›´æ¥è¿‘é™æ€ç±»å‹"

**ç›¸å…³æ–‡ä»¶:** `element_generic.py`

---

## æ€»ç»“

| ç‰¹æ€§ | Python | Java |
|------|--------|------|
| ç±»å‹ç³»ç»Ÿ | åŠ¨æ€ + å¯é€‰æ³¨è§£ | é™æ€å¼ºåˆ¶ |
| æ£€æŸ¥å·¥å…· | mypy, pyright | javac |
| Optional | `Optional[T]` | `Optional<T>` |
| Union | `Union[A, B]` | æ—  (ç”¨çˆ¶ç±») |
| æ³›å‹ | `Generic[T]` | `<T>` |

---

**åˆ¶ä½œæ—¶é—´:** 2025-11-25
**åŸºäº:** DeadSimplePython Chapter 15 ç¤ºä¾‹ä»£ç 
