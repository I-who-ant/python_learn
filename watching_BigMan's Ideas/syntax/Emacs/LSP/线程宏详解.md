# Emacs Lisp çº¿ç¨‹å®è¯¦è§£ (Threading Macros)

## æ¦‚è¿°

**çº¿ç¨‹å®** (Threading Macros) æ˜¯å‡½æ•°å¼ç¼–ç¨‹ä¸­çš„ä¸€ç§æ¨¡å¼,ç”¨äºå°†å¤šä¸ªå‡½æ•°è°ƒç”¨ä¸²è”èµ·æ¥,é¿å…æ·±å±‚åµŒå¥—,æé«˜ä»£ç å¯è¯»æ€§ã€‚

åœ¨ Emacs Lisp ä¸­,çº¿ç¨‹å®æ¥è‡ª **dash.el** åº“,ä¸»è¦åŒ…æ‹¬:
- `->>` (Thread Last) - åç½®çº¿ç¨‹å®
- `->` (Thread First) - å‰ç½®çº¿ç¨‹å®

---

## ä¸ºä»€ä¹ˆéœ€è¦çº¿ç¨‹å®?

### é—®é¢˜: æ·±å±‚åµŒå¥—éš¾ä»¥é˜…è¯»

ä¼ ç»Ÿçš„å‡½æ•°ç»„åˆä¼šäº§ç”Ÿæ·±å±‚åµŒå¥—:

```elisp
;; ä¼ ç»Ÿå†™æ³•: ä»å†…åˆ°å¤–é˜…è¯»
(intern
  (concat
    (symbol-name theme)
    "-theme"))

;; æ‰§è¡Œé¡ºåº: 1. symbol-name â†’ 2. concat â†’ 3. intern
;; ä½†é˜…è¯»æ—¶è¦ä»æœ€å†…å±‚å¾€å¤–çœ‹,åäººç±»ç›´è§‰
```

### è§£å†³æ–¹æ¡ˆ: ä½¿ç”¨çº¿ç¨‹å®

```elisp
;; ä½¿ç”¨ ->> çº¿ç¨‹å®: ä»ä¸Šåˆ°ä¸‹é˜…è¯»
(->> theme
     symbol-name
     (concat "-theme")
     intern)

;; æ‰§è¡Œé¡ºåº: 1. symbol-name â†’ 2. concat â†’ 3. intern
;; é˜…è¯»é¡ºåºä¹Ÿæ˜¯ä»ä¸Šåˆ°ä¸‹,ç¬¦åˆç›´è§‰!
```

---

## `->>` (Thread Last) è¯¦è§£

### åŸºæœ¬è¯­æ³•

```elisp
(->> INITIAL-VALUE
     FORM-1
     FORM-2
     ...
     FORM-N)
```

### å·¥ä½œåŸç†

`->>` å°†å‰ä¸€ä¸ªè¡¨è¾¾å¼çš„ç»“æœä½œä¸º**æœ€åä¸€ä¸ªå‚æ•°**ä¼ é€’ç»™ä¸‹ä¸€ä¸ªè¡¨è¾¾å¼ã€‚

```elisp
;; å±•å¼€å‰
(->> x
     (f a b)
     (g c)
     h)

;; å±•å¼€å
(h (g c (f a b x)))

;; ç­‰ä»·äº
(h (g c (f a b x)))
```

### è¯¦ç»†æ‰§è¡Œæµç¨‹

```elisp
(->> 10
     (+ 5)
     (* 2)
     (- 100))

;; æ­¥éª¤ 1: 10 ä¼ ç»™ (+ 5 10) â†’ 15
;; æ­¥éª¤ 2: 15 ä¼ ç»™ (* 2 15) â†’ 30
;; æ­¥éª¤ 3: 30 ä¼ ç»™ (- 100 30) â†’ 70
;; æœ€ç»ˆç»“æœ: 70
```

---

## `->` (Thread First) è¯¦è§£

### åŸºæœ¬è¯­æ³•

```elisp
(-> INITIAL-VALUE
    FORM-1
    FORM-2
    ...
    FORM-N)
```

### å·¥ä½œåŸç†

`->` å°†å‰ä¸€ä¸ªè¡¨è¾¾å¼çš„ç»“æœä½œä¸º**ç¬¬ä¸€ä¸ªå‚æ•°**ä¼ é€’ç»™ä¸‹ä¸€ä¸ªè¡¨è¾¾å¼ã€‚

```elisp
;; å±•å¼€å‰
(-> x
    (f a b)
    (g c)
    h)

;; å±•å¼€å
(h (g (f x a b) c))

;; ç­‰ä»·äº
(h (g (f x a b) c))
```

### è¯¦ç»†æ‰§è¡Œæµç¨‹

```elisp
(-> 10
    (+ 5)
    (* 2)
    (- 100))

;; æ­¥éª¤ 1: 10 ä¼ ç»™ (+ 10 5) â†’ 15
;; æ­¥éª¤ 2: 15 ä¼ ç»™ (* 15 2) â†’ 30
;; æ­¥éª¤ 3: 30 ä¼ ç»™ (- 30 100) â†’ -70
;; æœ€ç»ˆç»“æœ: -70
```

---

## `->` vs `->>` å¯¹æ¯”

### å…³é”®åŒºåˆ«

| ç‰¹æ€§ | `->` (Thread First) | `->>` (Thread Last) |
|------|-------------------|-------------------|
| **å‚æ•°ä½ç½®** | ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•° | ä½œä¸ºæœ€åä¸€ä¸ªå‚æ•° |
| **é€‚ç”¨åœºæ™¯** | å¯¹è±¡æ–¹æ³•é“¾å¼è°ƒç”¨ | æ•°æ®å¤„ç†ç®¡é“ |
| **å¸¸è§ç”¨é€”** | æ“ä½œæ•°æ®ç»“æ„ | åˆ—è¡¨/åºåˆ—å¤„ç† |

### ç¤ºä¾‹å¯¹æ¯”

```elisp
;; -> (Thread First)
(-> '(1 2 3)
    (cons 0)       ; (cons 0 '(1 2 3)) â†’ (0 1 2 3)
    (append '(4))) ; (append (0 1 2 3) '(4)) â†’ (0 1 2 3 4)

;; ->> (Thread Last)
(->> '(1 2 3)
     (cons 0)       ; (cons 0 '(1 2 3)) â†’ (0 1 2 3)
     (mapcar #'1+)) ; (mapcar #'1+ (0 1 2 3)) â†’ (1 2 3 4)
```

### ä½•æ—¶ä½¿ç”¨å“ªä¸ª?

**ä½¿ç”¨ `->` å½“:**
- ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯"ä¸»ä½“"(å¦‚å¯¹è±¡ã€æ•°æ®ç»“æ„)
- åç»­å‚æ•°æ˜¯"æ“ä½œ"æˆ–"é€‰é¡¹"

```elisp
;; æ„å»ºå“ˆå¸Œè¡¨
(-> (make-hash-table)
    (puthash 'name "Alice")
    (puthash 'age 30))
```

**ä½¿ç”¨ `->>` å½“:**
- æœ€åä¸€ä¸ªå‚æ•°æ˜¯"æ•°æ®"
- å‰é¢çš„å‚æ•°æ˜¯"æ“ä½œå‚æ•°"
- å¤„ç†åˆ—è¡¨/åºåˆ—çš„å‡½æ•°é“¾

```elisp
;; åˆ—è¡¨å¤„ç†ç®¡é“
(->> '(1 2 3 4 5)
     (mapcar #'1+)           ; æ¯ä¸ªå…ƒç´  +1
     (--filter (> it 3))     ; è¿‡æ»¤ > 3
     (apply #'+))            ; æ±‚å’Œ
```

---

## å®æˆ˜æ¡ˆä¾‹åˆ†æ

### æ¡ˆä¾‹ 1: `rc/require-theme` å‡½æ•°

è¿™æ˜¯ä½ æä¾›çš„ç¤ºä¾‹ä»£ç :

```elisp
(defun rc/require-theme (theme)
  (let ((theme-package (->> theme
                            (symbol-name)
                            (funcall (-flip #'concat) "-theme")
                            (intern))))
    (require theme-package)))
```

#### é€æ­¥æ‹†è§£

**ç›®æ ‡:** å°† `theme` ç¬¦å·è½¬æ¢ä¸ºåŒ…åå¹¶åŠ è½½

```elisp
;; å‡è®¾ theme = 'gruber-darker

;; æ­¥éª¤ 1: symbol-name
(->> 'gruber-darker
     (symbol-name))
;; â†’ "gruber-darker" (å­—ç¬¦ä¸²)

;; æ­¥éª¤ 2: funcall (-flip #'concat) "-theme"
(->> "gruber-darker"
     (funcall (-flip #'concat) "-theme"))
;; â†’ "gruber-darker-theme"

;; æ­¥éª¤ 3: intern
(->> "gruber-darker-theme"
     (intern))
;; â†’ 'gruber-darker-theme (ç¬¦å·)

;; æœ€ç»ˆç»“æœ
;; theme-package = 'gruber-darker-theme
```

#### å…³é”®æŠ€å·§: `-flip`

`-flip` ç”¨äºç¿»è½¬å‡½æ•°å‚æ•°é¡ºåº:

```elisp
;; concat çš„æ­£å¸¸ç”¨æ³•
(concat "prefix-" "suffix")  ; â†’ "prefix-suffix"

;; ä½¿ç”¨ -flip ç¿»è½¬å‚æ•°
(funcall (-flip #'concat) "suffix" "prefix-")  ; â†’ "prefix-suffix"

;; åœ¨çº¿ç¨‹å®ä¸­çš„åº”ç”¨
(->> "gruber-darker"
     (funcall (-flip #'concat) "-theme"))
;; ç­‰ä»·äº
(concat "gruber-darker" "-theme")  ; â†’ "gruber-darker-theme"
```

#### ä¸ºä»€ä¹ˆéœ€è¦ `-flip`?

å› ä¸º `->>` å°†å€¼ä¼ ç»™**æœ€åä¸€ä¸ªå‚æ•°**,ä½† `concat` éœ€è¦å‰ç¼€åœ¨å‰:

```elisp
;; ä¸ç”¨ -flip (é”™è¯¯)
(->> "gruber-darker"
     (concat "-theme"))
;; â†’ (concat "-theme" "gruber-darker")  ; âŒ ç»“æœ: "-themegruber-darker"

;; ä½¿ç”¨ -flip (æ­£ç¡®)
(->> "gruber-darker"
     (funcall (-flip #'concat) "-theme"))
;; â†’ (concat "gruber-darker" "-theme")  ; âœ… ç»“æœ: "gruber-darker-theme"
```

#### ç­‰ä»·çš„ä¼ ç»Ÿå†™æ³•

```elisp
;; ä½¿ç”¨ ->> çº¿ç¨‹å®
(defun rc/require-theme (theme)
  (let ((theme-package (->> theme
                            (symbol-name)
                            (funcall (-flip #'concat) "-theme")
                            (intern))))
    (require theme-package)))

;; ä¼ ç»ŸåµŒå¥—å†™æ³•
(defun rc/require-theme (theme)
  (let ((theme-package (intern
                         (concat
                           (symbol-name theme)
                           "-theme"))))
    (require theme-package)))

;; ä¼ ç»Ÿé€æ­¥å†™æ³•
(defun rc/require-theme (theme)
  (let* ((theme-str (symbol-name theme))
         (package-str (concat theme-str "-theme"))
         (theme-package (intern package-str)))
    (require theme-package)))
```

---

### æ¡ˆä¾‹ 2: åˆ—è¡¨å¤„ç†ç®¡é“

```elisp
;; ä»»åŠ¡: è·å–æ‰€æœ‰æ•°å­—,åŠ å€,è¿‡æ»¤å¶æ•°,æ±‚å’Œ

;; ä½¿ç”¨ ->> çº¿ç¨‹å®
(->> '(1 "a" 2 "b" 3 "c" 4 "d" 5)
     (--filter (numberp it))       ; (1 2 3 4 5)
     (mapcar (lambda (x) (* x 2))) ; (2 4 6 8 10)
     (--filter (= (mod it 2) 0))   ; (2 4 6 8 10)
     (apply #'+))                  ; 30

;; ä¼ ç»ŸåµŒå¥—å†™æ³•(éš¾è¯»)
(apply #'+
  (--filter (= (mod it 2) 0)
    (mapcar (lambda (x) (* x 2))
      (--filter (numberp it)
        '(1 "a" 2 "b" 3 "c" 4 "d" 5)))))
```

---

### æ¡ˆä¾‹ 3: å­—ç¬¦ä¸²å¤„ç†

```elisp
;; ä»»åŠ¡: æ¸…ç†ç”¨æˆ·è¾“å…¥

;; ä½¿ç”¨ ->> çº¿ç¨‹å®
(->> "  Hello World  "
     (string-trim)              ; "Hello World"
     (downcase)                 ; "hello world"
     (replace-regexp-in-string " " "-")) ; "hello-world"

;; ä¼ ç»ŸåµŒå¥—å†™æ³•
(replace-regexp-in-string " " "-"
  (downcase
    (string-trim "  Hello World  ")))
```

---

### æ¡ˆä¾‹ 4: æ–‡ä»¶è·¯å¾„å¤„ç†

```elisp
;; ä»»åŠ¡: ä»æ–‡ä»¶è·¯å¾„ä¸­æå–æ–‡ä»¶å(ä¸å«æ‰©å±•å)

;; ä½¿ç”¨ ->> çº¿ç¨‹å®
(->> "/home/user/documents/report.pdf"
     (file-name-nondirectory)   ; "report.pdf"
     (file-name-sans-extension)) ; "report"

;; ä¼ ç»Ÿå†™æ³•
(file-name-sans-extension
  (file-name-nondirectory "/home/user/documents/report.pdf"))
```

---

## é«˜çº§æŠ€å·§

### æŠ€å·§ 1: æ··åˆä½¿ç”¨ `->` å’Œ `->>`

```elisp
;; å¤æ‚çš„æ•°æ®è½¬æ¢
(->> '(1 2 3 4 5)
     (mapcar #'1+)              ; ->> ç”¨äºåˆ—è¡¨å¤„ç†
     (-> (append '(0))          ; -> ç”¨äºå•ä¸ªæ“ä½œ
         (reverse)))

;; ç­‰ä»·äº
(reverse (append (mapcar #'1+ '(1 2 3 4 5)) '(0)))
```

---

### æŠ€å·§ 2: ä½¿ç”¨ `--filter`, `--map` ç­‰åŒ¿åå‡½æ•°å®

dash.el æä¾›äº†ä¾¿æ·çš„åŒ¿åå‡½æ•°å®:

```elisp
;; --filter: it ä»£è¡¨å½“å‰å…ƒç´ 
(->> '(1 2 3 4 5)
     (--filter (> it 3)))  ; (4 5)

;; --map: it ä»£è¡¨å½“å‰å…ƒç´ 
(->> '(1 2 3 4 5)
     (--map (* it 2)))     ; (2 4 6 8 10)

;; --reduce: acc ä»£è¡¨ç´¯åŠ å™¨, it ä»£è¡¨å½“å‰å…ƒç´ 
(->> '(1 2 3 4 5)
     (--reduce (+ acc it) 0))  ; 15
```

---

### æŠ€å·§ 3: ä½¿ç”¨ `-some->` å’Œ `-some->>`

å®‰å…¨çš„çº¿ç¨‹å®,é‡åˆ° `nil` æ—¶çŸ­è·¯:

```elisp
;; -some->> é‡åˆ° nil æ—¶åœæ­¢
(-some->> '(1 2 3)
          (mapcar #'1+)         ; (2 3 4)
          (--filter (> it 5))   ; nil (æ²¡æœ‰å…ƒç´  > 5)
          (apply #'+))          ; ä¸ä¼šæ‰§è¡Œ,ç›´æ¥è¿”å› nil

;; å¯¹æ¯”æ™®é€š ->>
(->> '(1 2 3)
     (mapcar #'1+)
     (--filter (> it 5))
     (apply #'+))              ; é”™è¯¯! (apply #'+ nil)
```

---

## å¸¸è§åº”ç”¨åœºæ™¯

### 1. ä¸»é¢˜åŠ è½½

```elisp
(defun rc/require-theme (theme)
  "åŠ è½½ä¸»é¢˜åŒ…: 'gruber-darker â†’ 'gruber-darker-theme"
  (->> theme
       (symbol-name)
       (concat "-theme")
       (intern)
       (require)))
```

---

### 2. é…ç½®æ–‡ä»¶åˆ—è¡¨

```elisp
;; åŠ è½½æ‰€æœ‰ .el é…ç½®æ–‡ä»¶
(->> "~/.emacs.d/lisp"
     (directory-files)
     (--filter (string-suffix-p ".el" it))
     (--map (expand-file-name it "~/.emacs.d/lisp"))
     (mapc #'load))
```

---

### 3. Buffer åç§°å¤„ç†

```elisp
;; ç”Ÿæˆå”¯ä¸€ buffer åç§°
(->> (buffer-name)
     (concat "*" )
     (concat "*")
     (generate-new-buffer-name))
```

---

### 4. åˆ—è¡¨æ•°æ®æ¸…æ´—

```elisp
;; æ¸…æ´—ç”¨æˆ·åˆ—è¡¨: å»é‡ã€æ’åºã€è¿‡æ»¤
(->> '("alice" "bob" "alice" "charlie" "bob")
     (-uniq)                    ; å»é‡
     (-sort #'string<)          ; æ’åº
     (--filter (> (length it) 3))) ; è¿‡æ»¤çŸ­åå­—
```

---

## æ€§èƒ½è€ƒè™‘

### çº¿ç¨‹å®æ˜¯å®,ä¸æ˜¯å‡½æ•°

```elisp
;; çº¿ç¨‹å®åœ¨ç¼–è¯‘æ—¶å±•å¼€,æ²¡æœ‰è¿è¡Œæ—¶å¼€é”€
(->> x f g h)

;; å±•å¼€ä¸º
(h (g (f x)))

;; ä¸æ˜¯
(apply-thread-last x '(f g h))  ; âŒ è¿™æ ·ä¼šæœ‰è¿è¡Œæ—¶å¼€é”€
```

### ä¼˜åŒ–å»ºè®®

1. **é¿å…è¿‡é•¿çš„çº¿ç¨‹é“¾**
   ```elisp
   ;; å¤ªé•¿äº†,ä¸å¥½è°ƒè¯•
   (->> data
        f1 f2 f3 f4 f5 f6 f7 f8 f9 f10)

   ;; æ›´å¥½: åˆ†æ®µå¤„ç†
   (let ((step1 (->> data f1 f2 f3))
         (step2 (->> step1 f4 f5 f6)))
     (->> step2 f7 f8 f9 f10))
   ```

2. **ä½¿ç”¨ `let` ç»‘å®šä¸­é—´ç»“æœ**
   ```elisp
   ;; æ¸…æ™°æ ‡æ³¨æ¯ä¸€æ­¥
   (let* ((cleaned (->> raw-data clean normalize))
          (filtered (->> cleaned (--filter valid-p)))
          (sorted (->> filtered (-sort comparator))))
     sorted)
   ```

---

## è°ƒè¯•æŠ€å·§

### æŠ€å·§ 1: é€æ­¥å±•å¼€è°ƒè¯•

```elisp
;; åŸå§‹ä»£ç 
(->> '(1 2 3 4 5)
     (mapcar #'1+)
     (--filter (> it 3))
     (apply #'+))

;; è°ƒè¯•æ­¥éª¤ 1: åªæ‰§è¡Œç¬¬ä¸€æ­¥
(->> '(1 2 3 4 5)
     (mapcar #'1+))
;; â†’ (2 3 4 5 6)

;; è°ƒè¯•æ­¥éª¤ 2: æ‰§è¡Œå‰ä¸¤æ­¥
(->> '(1 2 3 4 5)
     (mapcar #'1+)
     (--filter (> it 3)))
;; â†’ (4 5 6)

;; è°ƒè¯•æ­¥éª¤ 3: å…¨éƒ¨æ‰§è¡Œ
(->> '(1 2 3 4 5)
     (mapcar #'1+)
     (--filter (> it 3))
     (apply #'+))
;; â†’ 15
```

---

### æŠ€å·§ 2: ä½¿ç”¨ `tap`

è‡ªå®šä¹‰ tap å‡½æ•°æŸ¥çœ‹ä¸­é—´å€¼:

```elisp
(defun tap (x)
  "æ‰“å°å¹¶è¿”å› x"
  (message "TAP: %S" x)
  x)

;; ä½¿ç”¨ tap è°ƒè¯•
(->> '(1 2 3 4 5)
     (mapcar #'1+)
     tap                        ; æ‰“å°: (2 3 4 5 6)
     (--filter (> it 3))
     tap                        ; æ‰“å°: (4 5 6)
     (apply #'+))               ; â†’ 15
```

---

## ä¸å…¶ä»–è¯­è¨€å¯¹æ¯”

### Clojure

```clojure
;; Clojure çš„çº¿ç¨‹å®
(->> [1 2 3 4 5]
     (map inc)
     (filter #(> % 3))
     (reduce +))

;; Emacs Lisp
(->> '(1 2 3 4 5)
     (mapcar #'1+)
     (--filter (> it 3))
     (apply #'+))
```

---

### JavaScript (lodash chain)

```javascript
// JavaScript lodash
_.chain([1, 2, 3, 4, 5])
  .map(x => x + 1)
  .filter(x => x > 3)
  .sum()
  .value()

// Emacs Lisp
(->> '(1 2 3 4 5)
     (mapcar #'1+)
     (--filter (> it 3))
     (apply #'+))
```

---

### Elixir

```elixir
# Elixir çš„ç®¡é“æ“ä½œç¬¦
[1, 2, 3, 4, 5]
|> Enum.map(&(&1 + 1))
|> Enum.filter(&(&1 > 3))
|> Enum.sum()

# Emacs Lisp
(->> '(1 2 3 4 5)
     (mapcar #'1+)
     (--filter (> it 3))
     (apply #'+))
```

---

## å¸¸è§é”™è¯¯

### é”™è¯¯ 1: æ··æ·† `->` å’Œ `->>`

```elisp
;; âŒ é”™è¯¯: ç”¨ -> å¤„ç†åˆ—è¡¨
(-> '(1 2 3)
    (mapcar #'1+))
;; â†’ é”™è¯¯! (mapcar '(1 2 3) #'1+)

;; âœ… æ­£ç¡®: ç”¨ ->> å¤„ç†åˆ—è¡¨
(->> '(1 2 3)
     (mapcar #'1+))
;; â†’ (2 3 4)
```

---

### é”™è¯¯ 2: å¿˜è®°æ·»åŠ æ‹¬å·

```elisp
;; âŒ é”™è¯¯: å¤šå‚æ•°å‡½æ•°ç¼ºå°‘æ‹¬å·
(->> "hello"
     concat "-world")
;; â†’ é”™è¯¯! concat å’Œ "-world" è¢«å½“ä½œä¸¤ä¸ªç‹¬ç«‹çš„æ­¥éª¤

;; âœ… æ­£ç¡®: æ·»åŠ æ‹¬å·
(->> "hello"
     (concat "-world"))
;; â†’ "hello-world"
```

---

### é”™è¯¯ 3: å‚æ•°é¡ºåºé”™è¯¯

```elisp
;; âŒ é”™è¯¯: concat å‚æ•°é¡ºåºåäº†
(->> "world"
     (concat "hello-"))
;; â†’ "hello-world" (çœ‹èµ·æ¥å¯¹,ä½†å®é™…æ˜¯ concat "hello-" "world")
;; â†’ å¦‚æœæœŸæœ›çš„æ˜¯ "world-hello",å°±é”™äº†

;; âœ… æ­£ç¡®: ä½¿ç”¨ -flip
(->> "world"
     (funcall (-flip #'concat) "-hello"))
;; â†’ "world-hello"
```

---

## æœ€ä½³å®è·µ

### 1. ä¿æŒå¯è¯»æ€§

```elisp
;; âœ… å¥½: æ¯æ­¥ä¸€è¡Œ,æ¸…æ™°æ˜äº†
(->> data
     (mapcar #'process)
     (--filter valid-p)
     (apply #'merge))

;; âŒ å·®: å…¨æŒ¤åœ¨ä¸€è¡Œ
(->> data (mapcar #'process) (--filter valid-p) (apply #'merge))
```

---

### 2. ä½¿ç”¨æœ‰æ„ä¹‰çš„ä¸­é—´å˜é‡

```elisp
;; âœ… å¥½: æ¸…æ™°æ ‡æ³¨æ¯ä¸€æ­¥
(let* ((users (->> raw-data parse-users))
       (active (->> users (--filter (eq (plist-get it :status) 'active))))
       (sorted (->> active (-sort #'user-compare))))
  sorted)

;; âŒ å·®: ä¸€æ¡çº¿ç¨‹åˆ°åº•,éš¾ä»¥ç†è§£
(->> raw-data
     parse-users
     (--filter (eq (plist-get it :status) 'active))
     (-sort #'user-compare))
```

---

### 3. é€‚åº¦ä½¿ç”¨

```elisp
;; âœ… å¥½: ç®€å•æ“ä½œç›´æ¥åµŒå¥—
(concat (symbol-name theme) "-theme")

;; âŒ è¿‡åº¦: è¿‡äºç®€å•çš„æ“ä½œæ²¡å¿…è¦ç”¨çº¿ç¨‹å®
(->> theme
     (symbol-name)
     (concat "-theme"))
```

---

## æ€»ç»“

### æ ¸å¿ƒè¦ç‚¹

1. **`->>`** = Thread Last = æ•°æ®ä½œä¸º**æœ€åä¸€ä¸ªå‚æ•°**
2. **`->`** = Thread First = æ•°æ®ä½œä¸º**ç¬¬ä¸€ä¸ªå‚æ•°**
3. **çº¿ç¨‹å®æ˜¯å®** = ç¼–è¯‘æ—¶å±•å¼€,æ— è¿è¡Œæ—¶å¼€é”€
4. **æé«˜å¯è¯»æ€§** = ä»ä¸Šåˆ°ä¸‹,åƒç®¡é“ä¸€æ ·é˜…è¯»ä»£ç 

---

### ä½•æ—¶ä½¿ç”¨

**âœ… é€‚åˆä½¿ç”¨çº¿ç¨‹å®:**
- å¤šæ­¥éª¤çš„æ•°æ®è½¬æ¢
- åˆ—è¡¨/å­—ç¬¦ä¸²å¤„ç†ç®¡é“
- é…ç½®æ–‡ä»¶åŠ è½½é“¾
- éœ€è¦æ¸…æ™°è¡¨è¾¾æ•°æ®æµå‘

**âŒ ä¸é€‚åˆä½¿ç”¨çº¿ç¨‹å®:**
- å•æ­¥ç®€å•æ“ä½œ
- æœ‰å¤æ‚çš„åˆ†æ”¯é€»è¾‘
- éœ€è¦é¢‘ç¹è®¿é—®ä¸­é—´ç»“æœ
- å‚æ•°é¡ºåºéš¾ä»¥ç»Ÿä¸€

---

### å¿«é€Ÿå‚è€ƒ

```elisp
;; ->> (Thread Last)
(->> x
     (f a)    ; (f a x)
     (g b c)) ; (g b c (f a x))

;; -> (Thread First)
(-> x
    (f a)    ; (f x a)
    (g b c)) ; (g (f x a) b c)

;; -some->> (å®‰å…¨ç‰ˆæœ¬,é‡ nil åœæ­¢)
(-some->> x f g h)

;; -flip (ç¿»è½¬å‡½æ•°å‚æ•°)
(funcall (-flip #'concat) "suffix" "prefix")
;; â†’ "prefixsuffix"
```

---

### ä¾èµ–å®‰è£…

çº¿ç¨‹å®éœ€è¦ **dash.el** åº“:

```elisp
;; å®‰è£… dash.el
M-x package-install RET dash RET

;; åœ¨é…ç½®ä¸­å¼•å…¥
(require 'dash)

;; æˆ–ä½¿ç”¨ use-package
(use-package dash
  :ensure t)
```

---

**æŒæ¡çº¿ç¨‹å®,è®©ä½ çš„ Emacs Lisp ä»£ç æ›´ä¼˜é›…!** ğŸš€
