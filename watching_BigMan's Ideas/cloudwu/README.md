# Soluna é¡¹ç›®çŸ¥è¯†åº“

## ğŸ“š å…³äºæœ¬çŸ¥è¯†åº“

æœ¬çŸ¥è¯†åº“åŸºäº [cloudwu/soluna](https://github.com/cloudwu/soluna) é¡¹ç›®åŠå…¶ [Discussion #1](https://github.com/cloudwu/soluna/discussions/1) çš„æŠ€æœ¯è®¨è®ºæ•´ç†è€Œæˆ,æ¶µç›– 2D æ¸¸æˆå¼•æ“å¼€å‘æ¶‰åŠçš„æ ¸å¿ƒæŠ€æœ¯æ¦‚å¿µã€‚

**Soluna** = **Sokol** + **Lua** = è½»é‡çº§ 2D æ¸¸æˆå¼•æ“


??(æœ¬æ–‡åˆ†äº«äº†è°·æ­Œåº”ç”¨å¸‚åœºçš„ä¸Šæ¶æ–¹æ¡ˆï¼Œ
åŒ…æ‹¬ä½¿ç”¨åŠ å¯†åŒ…ã€é€‰æ‹©åˆé€‚çš„åŠ å›ºå·¥å…·ã€æ—¶é—´é”™å¼€é©¬ç”²åŒ…æäº¤ã€å¶æ‘˜è¦é¿å…é‡å¤ä¿¡æ¯ä»¥åŠåº”å¯¹å…³è”æ€§ä¸‹æ¶ç­–ç•¥ã€‚
åœ¨æ¨å¹¿è¿è¥æœŸé—´ï¼Œé€šè¿‡VIPNé˜²æŠ¤å·¥å…·åŒºåˆ†æ­£å¸¸ç”¨æˆ·ä¸æŠ½æ£€äººå‘˜ï¼Œé˜²æ­¢å› æŠ½æ£€å¯¼è‡´çš„åº”ç”¨ä¸‹æ¶ï¼Œæé«˜åŒ…çš„ç¨³å®šæ€§ã€‚)
---

## ğŸ¯ é¡¹ç›®ç®€ä»‹

### ä»€ä¹ˆæ˜¯ Soluna?

Soluna æ˜¯äº‘é£(cloudwu)å¼€å‘çš„è½»é‡çº§ 2D æ¸¸æˆå¼•æ“,ä¸“æ³¨äº:
- âœ… ç®€åŒ– 2D æ¸¸æˆå¼€å‘æµç¨‹
- âœ… æä¾›å¤šçº¿ç¨‹ Lua è„šæœ¬æ”¯æŒ
- âœ… è·¨å¹³å°(Windows/Linux/macOS/WebAssembly)
- âœ… æç®€ä¸»ä¹‰è®¾è®¡å“²å­¦

### æ ¸å¿ƒæŠ€æœ¯æ ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ¸¸æˆé€»è¾‘å±‚                      â”‚
â”‚  â€¢ Lua è„šæœ¬(æ¸¸æˆé€»è¾‘)            â”‚
â”‚  â€¢ ltask(å¤šçº¿ç¨‹æ”¯æŒ)             â”‚
â”‚  â€¢ lua2c(ä»£ç åµŒå…¥)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ¸²æŸ“å±‚                          â”‚
â”‚  â€¢ 2D Batch æ¸²æŸ“ç³»ç»Ÿ             â”‚
â”‚  â€¢ è¿è¡Œæ—¶çº¹ç†å›¾é›†æ‰“åŒ…             â”‚
â”‚  â€¢ Sprite/æè´¨ç³»ç»Ÿ               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å›¾å½¢ API å±‚                     â”‚
â”‚  â€¢ Sokol(OpenGL/Metal/D3D11)    â”‚
â”‚  â€¢ çª—å£ç®¡ç†                      â”‚
â”‚  â€¢ ç€è‰²å™¨ç³»ç»Ÿ                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“– æ–‡æ¡£ç›®å½•

### åŸºç¡€çŸ¥è¯†

| åºå· | æ–‡æ¡£ | è¯´æ˜ | éš¾åº¦ |
|------|------|------|------|
| 01 | [Lua è¯­è¨€åŸºç¡€ä»‹ç»](./01-Luaè¯­è¨€åŸºç¡€ä»‹ç».md) | Lua è¯­æ³•ã€ç‰¹æ€§ã€ä¸ C äº¤äº’ | â­ |
| 02 | [Sokol å›¾å½¢åº“ä»‹ç»](./02-Sokolå›¾å½¢åº“ä»‹ç».md) | è·¨å¹³å°å›¾å½¢ API æŠ½è±¡å±‚ | â­â­ |
| 03 | [ltask å¤šçº¿ç¨‹æ¡†æ¶](./03-ltaskå¤šçº¿ç¨‹æ¡†æ¶.md) | Lua å¤šçº¿ç¨‹ç¼–ç¨‹ | â­â­ |

### æ ¸å¿ƒæŠ€æœ¯

| åºå· | æ–‡æ¡£ | è¯´æ˜ | éš¾åº¦ |
|------|------|------|------|
| 04 | [2D æ¸²æŸ“ç®¡çº¿æ¶æ„](./04-2Dæ¸²æŸ“ç®¡çº¿æ¶æ„.md) | Batch æ¸²æŸ“ã€æ•°æ®ç»“æ„è®¾è®¡ | â­â­â­ |
| 05 | [çº¹ç†å›¾é›†æ‰“åŒ…æŠ€æœ¯](./05-çº¹ç†å›¾é›†æ‰“åŒ…æŠ€æœ¯.md) | è¿è¡Œæ—¶åŠ¨æ€æ‰“åŒ… vs ç¦»çº¿å·¥å…· | â­â­â­ |
| 06 | [å˜æ¢çŸ©é˜µä¸ç¼–ç ä¼˜åŒ–](./06-å˜æ¢çŸ©é˜µä¸ç¼–ç ä¼˜åŒ–.md) | Scale/Rotation ç¼–ç æŠ€å·§ | â­â­â­ |

### å·¥ç¨‹å®è·µ

| åºå· | æ–‡æ¡£ | è¯´æ˜ | éš¾åº¦ |
|------|------|------|------|
| 07 | [æ„å»ºç³»ç»Ÿå¯¹æ¯”](./07-æ„å»ºç³»ç»Ÿå¯¹æ¯”.md) | Make/xmake/luamake é€‰æ‹© | â­â­ |
| 08 | [lua2c ä»£ç åµŒå…¥æŠ€æœ¯](./08-lua2cä»£ç åµŒå…¥æŠ€æœ¯.md) | å°† Lua ç¼–è¯‘è¿›å¯æ‰§è¡Œæ–‡ä»¶ | â­â­ |
| 09 | [Soluna é¡¹ç›®æ¶æ„æ€»è§ˆ](./09-Solunaé¡¹ç›®æ¶æ„æ€»è§ˆ.md) | æ•´ä½“è®¾è®¡ä¸å®ç°è·¯å¾„ | â­â­â­ |

### æ‰©å±•ä¸»é¢˜

| åºå· | æ–‡æ¡£ | è¯´æ˜ | éš¾åº¦ |
|------|------|------|------|
| 10 | [æ¸¸æˆå¼•æ“å¯¹æ¯”åˆ†æ](./10-æ¸¸æˆå¼•æ“å¯¹æ¯”åˆ†æ.md) | Soluna vs Godot vs LÃ–VE | â­â­ |
| 11 | [Spine éª¨éª¼åŠ¨ç”»é›†æˆ](./11-Spineéª¨éª¼åŠ¨ç”»é›†æˆ.md) | Sokol Spine ç»‘å®šä½¿ç”¨ | â­â­â­ |
| 12 | [WebAssembly å¯¼å‡º](./12-WebAssemblyå¯¼å‡º.md) | HTML5 å¹³å°æ”¯æŒ | â­â­â­ |

---

## ğŸ”‘ æ ¸å¿ƒæ¦‚å¿µé€ŸæŸ¥

### æŠ€æœ¯æœ¯è¯­

| æœ¯è¯­ | è¯´æ˜ | ç›¸å…³æ–‡æ¡£ |
|------|------|---------|
| **Sokol** | è½»é‡çº§è·¨å¹³å°å›¾å½¢åº“(ä»…å¤´æ–‡ä»¶) | 02 |
| **ltask** | Lua å¤šçº¿ç¨‹ä»»åŠ¡è°ƒåº¦æ¡†æ¶ | 03 |
| **Batch Rendering** | æ‰¹é‡æ¸²æŸ“æŠ€æœ¯,å‡å°‘ draw call | 04 |
| **Texture Atlas** | çº¹ç†å›¾é›†,å°†å¤šå¼ å›¾ç‰‡æ‰“åŒ…åˆ°ä¸€å¼ å¤§å›¾ | 05 |
| **Sprite** | ç²¾çµ,2D æ¸¸æˆä¸­çš„å›¾åƒå…ƒç´  | 04, 05 |
| **SR ç¼–ç ** | Scale + Rotation å‹ç¼©ç¼–ç  | 06 |
| **Fixed-point** | å®šç‚¹æ•°,æ•´æ•°è¡¨ç¤ºå°æ•° | 06 |
| **lua2c** | Lua è½¬ C ä»£ç å·¥å…· | 08 |
| **Submodule** | Git å­æ¨¡å—,ç®¡ç†ç¬¬ä¸‰æ–¹ä¾èµ– | 07 |
| **MinGW** | Windows ä¸Šçš„ GCC å·¥å…·é“¾ | 07 |

### æ•°æ®ç»“æ„

```c
// æ ¸å¿ƒæ¸²æŸ“å›¾å…ƒ
struct draw_primitive {
    int32_t x;          // ä½ç½® X(å®šç‚¹æ•°)
    int32_t y;          // ä½ç½® Y(å®šç‚¹æ•°)
    uint32_t sr;        // ç¼©æ”¾+æ—‹è½¬(æ‰“åŒ…)
    int32_t sprite;     // ç²¾çµ ID æˆ–æè´¨ ID
};

// æ‰¹æ¬¡ç»“æ„
struct draw_batch {
    int id;             // æ‰¹æ¬¡ ID
    int n;              // å›¾å…ƒæ•°é‡
    struct draw_primitive *stream;  // å›¾å…ƒæµ
};
```

---

## ğŸ“ å­¦ä¹ è·¯å¾„å»ºè®®

### åˆå­¦è€…è·¯å¾„(ä»é›¶å¼€å§‹)

1. **ç¬¬ 1 å‘¨**: Lua åŸºç¡€
   - é˜…è¯» [01-Lua è¯­è¨€åŸºç¡€ä»‹ç»](./01-Luaè¯­è¨€åŸºç¡€ä»‹ç».md)
   - å®Œæˆç®€å• Lua ç»ƒä¹ (è®¡ç®—å™¨ã€æ¸¸æˆè§’è‰²ç±»)
   - å­¦ä¹  Lua/C API åŸºç¡€

2. **ç¬¬ 2 å‘¨**: å›¾å½¢ç¼–ç¨‹åŸºç¡€
   - é˜…è¯» [02-Sokol å›¾å½¢åº“ä»‹ç»](./02-Sokolå›¾å½¢åº“ä»‹ç».md)
   - è¿è¡Œ Sokol ç¤ºä¾‹ç¨‹åº
   - ç†è§£é¡¶ç‚¹ç¼“å†²åŒºã€ç€è‰²å™¨æ¦‚å¿µ

3. **ç¬¬ 3 å‘¨**: å¤šçº¿ç¨‹ç¼–ç¨‹
   - é˜…è¯» [03-ltask å¤šçº¿ç¨‹æ¡†æ¶](./03-ltaskå¤šçº¿ç¨‹æ¡†æ¶.md)
   - å®è·µç®€å•çš„å¤šçº¿ç¨‹ä»»åŠ¡

4. **ç¬¬ 4 å‘¨**: 2D æ¸²æŸ“ç³»ç»Ÿ
   - é˜…è¯» [04-2D æ¸²æŸ“ç®¡çº¿æ¶æ„](./04-2Dæ¸²æŸ“ç®¡çº¿æ¶æ„.md)
   - ç†è§£ Batch æ¸²æŸ“åŸç†
   - å°è¯•ä¿®æ”¹ Soluna ç¤ºä¾‹

### è¿›é˜¶è·¯å¾„(æœ‰åŸºç¡€)

1. **æ·±å…¥å›¾å½¢ä¼˜åŒ–**
   - [05-çº¹ç†å›¾é›†æ‰“åŒ…æŠ€æœ¯](./05-çº¹ç†å›¾é›†æ‰“åŒ…æŠ€æœ¯.md)
   - [06-å˜æ¢çŸ©é˜µä¸ç¼–ç ä¼˜åŒ–](./06-å˜æ¢çŸ©é˜µä¸ç¼–ç ä¼˜åŒ–.md)

2. **å·¥ç¨‹åŒ–å®è·µ**
   - [07-æ„å»ºç³»ç»Ÿå¯¹æ¯”](./07-æ„å»ºç³»ç»Ÿå¯¹æ¯”.md)
   - [08-lua2c ä»£ç åµŒå…¥æŠ€æœ¯](./08-lua2cä»£ç åµŒå…¥æŠ€æœ¯.md)

3. **å®Œæ•´é¡¹ç›®ç†è§£**
   - [09-Soluna é¡¹ç›®æ¶æ„æ€»è§ˆ](./09-Solunaé¡¹ç›®æ¶æ„æ€»è§ˆ.md)
   - å…‹éš†é¡¹ç›®å¹¶æ„å»º
   - é˜…è¯»æºç å¹¶æ·»åŠ æ³¨é‡Š

---

## ğŸ’¡ è®¾è®¡å“²å­¦

### äº‘é£çš„æ ¸å¿ƒæ€æƒ³(æ¥è‡ª Discussion)

> "ç°ä»£ PC çš„æ€§èƒ½æ—©å·²è¶…å‡º 2D æ¸¸æˆçš„éœ€æ±‚,ç‰ºç‰²ä¸€äº›æ€§èƒ½æ¥æ¢å–è¿è¡Œæ—¶çš„ä¾¿åˆ©,å¯ä»¥ç®€åŒ–å·¥ä½œæµç¨‹,å°¤å…¶æ˜¯å¯¹ Mod åˆ¶ä½œè€…å‹å¥½ã€‚"

### æç®€ä¸»ä¹‰åŸåˆ™

1. **ä¼˜å…ˆç®€å•** - ä¸è¿½æ±‚å¤æ‚çš„å›¾å½¢æŠ€æœ¯
2. **è¿è¡Œæ—¶ä¼˜äºå·¥å…·é“¾** - å‡å°‘ç¦»çº¿å·¥å…·ä¾èµ–
3. **ä¸ªäººå…´è¶£é©±åŠ¨** - "æˆ‘å·²ç»åŠå¹´æ²¡å†™å¤æ‚ç¨‹åºäº†,å†™ç¨‹åºè®©æˆ‘å¿«ä¹"
4. **å®ç”¨å¯¼å‘** - ä¸åšç”¨ä¸ä¸Šçš„åŠŸèƒ½

### æŠ€æœ¯é€‰å‹é€»è¾‘

| é€‰æ‹© | ç†ç”± |
|------|------|
| **Sokol** vs BGFX | æ›´è½»é‡(ä»…å¤´æ–‡ä»¶),é›†æˆå¿«,è¿­ä»£å¿« |
| **Lua** vs TypeScript | åµŒå…¥æ€§å¼º,æ¸¸æˆè¡Œä¸šéªŒè¯ |
| **Make** vs xmake | ä¸ªäººä¹ æƒ¯,è‡ªç”¨ MinGW ç¯å¢ƒ |
| **è¿è¡Œæ—¶æ‰“åŒ…** vs TexturePacker | å·¥ä½œæµç®€åŒ–,å¯¹ Mod å‹å¥½ |

---

## ğŸ› ï¸ å¿«é€Ÿå¼€å§‹

### å…‹éš†é¡¹ç›®

```bash
git clone --recursive https://github.com/cloudwu/soluna.git
cd soluna
```

### æ„å»º(Windows/MinGW)

```bash
make
```

### æ„å»º(è·¨å¹³å°)

```bash
# å®‰è£… luamake
git clone https://github.com/actboy168/luamake.git
cd luamake && ./compile/install.sh
cd ../soluna

# æ„å»º
luamake
```

### è¿è¡Œç¤ºä¾‹

```bash
# Windows
./soluna.exe test/hello.lua

# Linux/macOS
./soluna test/hello.lua
```

---

## ğŸ“Š æŠ€æœ¯å¯¹æ¯”çŸ©é˜µ

### Soluna vs å…¶ä»–å¼•æ“

| ç‰¹æ€§ | Soluna | Godot | LÃ–VE | Unity |
|------|--------|-------|------|-------|
| **å®šä½** | 2D è½»é‡ | é€šç”¨å¼•æ“ | 2D æ¡†æ¶ | é€šç”¨å¼•æ“ |
| **è¯­è¨€** | Lua | GDScript/C# | Lua | C# |
| **å¤§å°** | æå° | è¾ƒå¤§ | å° | å¤§ |
| **å¤šçº¿ç¨‹** | ltask | æ”¯æŒ | æœ‰é™ | å¼ºå¤§ |
| **ç¼–è¾‘å™¨** | æ—  | å¼ºå¤§ | æ—  | å¼ºå¤§ |
| **å­¦ä¹ æ›²çº¿** | å¹³ç¼“ | ä¸­ç­‰ | å¹³ç¼“ | é™¡å³­ |
| **å¼€æº** | âœ… | âœ… | âœ… | âŒ |
| **WebAssembly** | æ”¯æŒ | æ”¯æŒ | æœ‰é™ | æ”¯æŒ |

---

## ğŸ”— ç›¸å…³èµ„æº

### å®˜æ–¹èµ„æº

- **Soluna GitHub**: https://github.com/cloudwu/soluna
- **äº‘é£ Blog**: https://blog.codingnow.com/
- **Discussion #1**: https://github.com/cloudwu/soluna/discussions/1
- **æŠ€æœ¯åšæ–‡**: https://blog.codingnow.com/2025/02/2d_pipeline_design.html

### ä¾èµ–åº“

- **Sokol**: https://github.com/floooh/sokol
- **ltask**: https://github.com/cloudwu/ltask
- **Lua**: https://www.lua.org/

### å­¦ä¹ èµ„æº

- **Programming in Lua**: http://www.lua.org/pil/
- **Sokol ç¤ºä¾‹**: https://floooh.github.io/sokol-html5/
- **äº‘é£çš„ Skynet**: https://github.com/cloudwu/skynet

---

## ğŸ¤ è´¡çŒ®è€…

Discussion #1 å‚ä¸è€…(æŒ‰æ—¶é—´é¡ºåº):
- **cloudwu** - é¡¹ç›®ä½œè€…
- xhacker5000 - UI ç¼–è¾‘å™¨è®¨è®º
- gitByEOS - å½¢å˜æ”¯æŒæé—®
- tangyiyang - ECS ç³»ç»Ÿå»ºè®®
- actboy168 - luamake æ¨è
- waruqi - xmake ææ¡ˆ
- julywind168 - ç¼–ç¨‹è¯­è¨€è®¨è®º
- samoyedsun - HTML5 å¯¼å‡ºè¯¢é—®
- vkensou - API è®¾è®¡åé¦ˆ
- cupen - TypeScript å»ºè®®
- xiaoliang6669 - AI è¾…åŠ©å¼€å‘å»ºè®®
- moloxiao - å®è·µè®¨è®º
- RadiantFly - å·¥å…·é“¾åé¦ˆ
- linkliu - Godot C# è¡¥å……

---

## ğŸ“ æ›´æ–°æ—¥å¿—

- **2025-12-07**: åˆå§‹ç‰ˆæœ¬,åŸºäº Discussion #1 åˆ›å»ºçŸ¥è¯†åº“
- æ¶µç›– 12 ä¸ªä¸»é¢˜æ–‡æ¡£
- æä¾›å­¦ä¹ è·¯å¾„å»ºè®®

---

## âš–ï¸ è®¸å¯è¯

æœ¬çŸ¥è¯†åº“å†…å®¹åŸºäºå…¬å¼€è®¨è®ºæ•´ç†,ä»…ä¾›å­¦ä¹ å‚è€ƒã€‚

Soluna é¡¹ç›®æœ¬èº«é‡‡ç”¨ MIT è®¸å¯è¯ã€‚

---

**å¼€å§‹å­¦ä¹ **: ğŸ‘‰ [01-Lua è¯­è¨€åŸºç¡€ä»‹ç»](./01-Luaè¯­è¨€åŸºç¡€ä»‹ç».md)
