# 云风游戏技术栈演进与学习路线

## 📚 云风技术栈的演进历史

### 技术演进时间线

```
2012-2014: ejoy2d (2D游戏引擎)
    ↓
2013-2018: skynet (游戏服务器框架)
    ↓
2020-2023: Ant Engine (3D游戏引擎)
    ↓
2024-现在: Soluna (轻量级2D引擎)
```

---

## 🎯 各项目定位与关系

### 1. **ejoy2d** - 2D 渲染引擎 (已停止维护)

**定位**: Lua + C 实现的 2D 游戏渲染引擎

**核心特性**:
- 基于 OpenGL ES 2.0
- Lua 作为游戏逻辑语言
- C 实现底层渲染
- 粒子系统、骨骼动画支持

**历史意义**:
- 验证了 **Lua + C 混合编程** 在游戏开发中的可行性
- 建立了 **数据驱动** 的渲染架构
- Soluna 的很多设计思想源自 ejoy2d

**为何停止维护**:
- OpenGL ES 2.0 过时(现在是 Vulkan/Metal/DX12 时代)
- 架构设计有历史包袱
- 云风想重新设计更现代的架构

---

### 2. **skynet** - 游戏服务器框架 (仍在维护)

**定位**: Actor 模型的高并发服务器框架

**核心特性**:
- **Actor 模型**: 每个 service 是独立的执行单元
- **消息传递**: 通过消息队列通信(无共享内存)
- **Lua + C**: C 实现底层调度,Lua 写业务逻辑
- **高性能**: 单机支持数万并发连接

**架构图**:
```
┌─────────────────────────────────────┐
│  skynet 主控节点                     │
│  ┌────────┐ ┌────────┐ ┌────────┐  │
│  │Service1│ │Service2│ │Service3│  │
│  │(Actor) │ │(Actor) │ │(Actor) │  │
│  └───┬────┘ └───┬────┘ └───┬────┘  │
│      │  消息队列  │          │       │
│      └───────────┴──────────┘       │
└─────────────────────────────────────┘
         ↓ 网络通信 ↓
    [客户端1] [客户端2] [客户端3]
```

**典型应用场景**:
- MMORPG 游戏服务器
- 聊天服务器
- 推送系统
- 分布式任务调度

**学习价值**:
- **并发编程**: 理解 Actor 模型
- **网络编程**: TCP/WebSocket/HTTP 处理
- **分布式系统**: 节点间通信

---

### 3. **Ant Engine** - 3D 游戏引擎 (商业项目)

**定位**: 类似 Unity 的通用 3D 游戏引擎

**核心特性**:
- **ECS 架构**: Entity-Component-System
- **Lua + C++**: C++ 实现核心,Lua 写游戏逻辑
- **现代图形 API**: Vulkan/Metal/DX12
- **物理引擎**: 集成 Bullet/PhysX
- **编辑器**: 类似 Unity 的可视化编辑器

**与 Unity/Unreal 对比**:
```
┌──────────┬────────────┬────────────┬────────────┐
│          │ Unity      │ Unreal     │ Ant Engine │
├──────────┼────────────┼────────────┼────────────┤
│ 脚本语言 │ C#         │ C++/BP     │ Lua        │
│ 图形 API │ 抽象层     │ 抽象层     │ 直接调用   │
│ ECS      │ 可选       │ 无         │ 核心架构   │
│ 开源     │ 否         │ 部分       │ 否         │
│ 学习曲线 │ 低         │ 高         │ 中         │
└──────────┴────────────┴────────────┴────────────┘
```

**为何不开源**:
- 商业项目,保护知识产权
- 包含大量第三方库(授权限制)
- 维护成本高

**学习价值**:
- **ECS 架构**: 现代游戏引擎标配
- **图形编程**: PBR、延迟渲染、全局光照
- **工具链**: 资源管线、打包、热更新

---

### 4. **Soluna** - 轻量级 2D 引擎 (开源中)

**定位**: 简化版的 2D 游戏引擎(ejoy2d 的现代继任者)

**核心特性**:
- **Sokol + Lua**: 单头文件库 + 脚本语言
- **ltask 多线程**: Actor 模型(借鉴 skynet)
- **现代图形 API**: 支持 OpenGL/Metal/DX11/WebGPU
- **极简设计**: 只做 2D 必需的功能

**设计哲学**:
> "用最少的代码实现 80% 的 2D 游戏需求"

**与 ejoy2d 的对比**:
```
┌────────────┬──────────────┬──────────────┐
│            │ ejoy2d       │ Soluna       │
├────────────┼──────────────┼──────────────┤
│ 图形 API   │ OpenGL ES 2  │ Sokol(多后端)│
│ 多线程     │ 无           │ ltask        │
│ 构建工具   │ Make         │ Make/xmake   │
│ 状态       │ 停止维护     │ 活跃开发     │
│ 代码量     │ ~8000 行     │ ~3000 行     │
└────────────┴──────────────┴──────────────┘
```

**学习价值**:
- **渲染管线**: Batch 渲染、纹理图集
- **多线程架构**: 逻辑线程 + 渲染线程
- **代码品质**: 云风的编程风格

---

## 🎓 游戏开发学习路线

### 路线 A: 从服务器到客户端(推荐给后端开发者)

```
第1阶段: Lua 语言基础 (1-2周)
  ├─ 学习资源: 《Programming in Lua》
  ├─ 实践项目: 用 Lua 写简单脚本
  └─ 目标: 熟悉 Lua 语法和元表机制

第2阶段: skynet 服务器框架 (1-2个月)
  ├─ 学习资源: skynet wiki + 云风博客
  ├─ 实践项目: 实现一个聊天服务器
  │   ├─ 登录/注册
  │   ├─ 好友系统
  │   ├─ 群聊
  │   └─ 消息持久化
  └─ 目标: 理解 Actor 模型和消息传递

第3阶段: Soluna 2D 引擎 (1-2个月)
  ├─ 学习资源: Soluna 源码 + Discussion
  ├─ 实践项目: 实现一个简单的 2D 游戏
  │   ├─ 地图渲染(TileMap)
  │   ├─ 精灵动画
  │   ├─ 碰撞检测
  │   └─ UI 系统
  └─ 目标: 理解渲染管线和游戏循环

第4阶段: 联网游戏 (2-3个月)
  ├─ 服务器: skynet
  ├─ 客户端: Soluna
  ├─ 实践项目: 多人在线游戏
  │   ├─ 客户端预测
  │   ├─ 服务器权威
  │   ├─ 状态同步
  │   └─ AOI(Area of Interest)
  └─ 目标: 理解网络游戏架构
```

---

### 路线 B: 从图形到引擎(推荐给前端/图形学爱好者)

```
第1阶段: 图形学基础 (2-3个月)
  ├─ 学习资源: 《Games101》(闫令琪)
  ├─ 实践项目:
  │   ├─ 软光栅化渲染器
  │   ├─ 光线追踪器
  │   └─ OpenGL 基础
  └─ 目标: 理解变换矩阵、光照模型

第2阶段: Sokol 图形库 (1个月)
  ├─ 学习资源: Sokol 官方示例
  ├─ 实践项目:
  │   ├─ Hello Triangle
  │   ├─ 纹理渲染
  │   ├─ Instancing
  │   └─ 后处理效果
  └─ 目标: 理解现代图形 API

第3阶段: Soluna 源码阅读 (1-2个月)
  ├─ 学习资源: Soluna 仓库 + 本知识库
  ├─ 实践任务:
  │   ├─ 理解 draw_primitive 结构
  │   ├─ 分析 Batch 渲染流程
  │   ├─ 实现自定义 Shader
  │   └─ 添加新的渲染特性
  └─ 目标: 掌握 2D 渲染管线

第4阶段: 独立游戏开发 (长期)
  ├─ 使用 Soluna 开发游戏
  ├─ 或转向学习 Ant Engine(如有开源)
  └─ 或学习 Unity/Godot 等成熟引擎
```

---

### 路线 C: 全栈游戏开发(推荐给计算机专业学生)

```
第1阶段: C/C++ 基础 (2-3个月)
  ├─ 《C Primer Plus》
  ├─ 《C++ Primer》
  └─ 实践: 实现数据结构(链表/树/哈希表)

第2阶段: 计算机基础 (大学课程)
  ├─ 数据结构与算法
  ├─ 操作系统(进程/线程/内存管理)
  ├─ 计算机网络(TCP/UDP/HTTP)
  └─ 计算机图形学

第3阶段: 游戏引擎基础 (3-6个月)
  ├─ 学习资源: 《Game Engine Architecture》
  ├─ 实践项目: 从零实现简单引擎
  │   ├─ 渲染模块(OpenGL)
  │   ├─ 物理模块(简单碰撞)
  │   ├─ 音频模块(OpenAL)
  │   └─ 资源管理
  └─ 目标: 理解引擎架构

第4阶段: 专项深入 (按兴趣选择)
  ├─ 服务器方向: skynet
  ├─ 渲染方向: Soluna 源码
  ├─ ECS 架构: 学习 EnTT/flecs
  └─ 工具链: 资源打包/热更新
```

---

## 🔧 技术栈关系图

```
┌─────────────────────────────────────────────────────┐
│                   游戏开发技术栈                      │
└─────────────────────────────────────────────────────┘
                         │
         ┌───────────────┴───────────────┐
         ↓                               ↓
    [客户端技术]                     [服务器技术]
         │                               │
    ┌────┴────┐                     ┌────┴────┐
    ↓         ↓                     ↓         ↓
 [2D引擎] [3D引擎]              [框架]    [存储]
    │         │                     │         │
ejoy2d    Ant Engine            skynet    Redis
Soluna    Unity/Unreal          ltask     MySQL
    │         │                     │         │
    └────┬────┘                     └────┬────┘
         ↓                               ↓
    [图形库]                        [网络库]
    Sokol                           libuv
    OpenGL/Vulkan                   asio
         │                               │
         └───────────────┬───────────────┘
                         ↓
                    [脚本语言]
                       Lua
                         │
                    [C/C++ 核心]
```

---

## 💡 实战项目建议

### 初级项目(1-2周)


**项目1: 命令行贪吃蛇**
- 技术栈: C/Lua
- 学习点: 游戏循环、输入处理、碰撞检测
- 参考: 不需要图形库,纯字符界面


**项目2: Sokol Hello Triangle**
- 技术栈: Sokol + C
- 学习点: 顶点缓冲、Shader、渲染管线
- 参考: Sokol 官方示例


---

### 中级项目(1-2个月)

**项目3: 2D 平台跳跃游戏**
- 技术栈: Soluna
- 功能:
  - TileMap 地图
  - 角色移动/跳跃
  - 敌人 AI
  - 关卡编辑器(可选)
- 学习点: 物理模拟、状态机、资源管理

**项目4: 多人聊天室**
- 技术栈: skynet
- 功能:
  - 用户认证
  - 公共/私聊
  - 在线列表
  - 消息持久化
- 学习点: 网络编程、数据库、并发控制

---

### 高级项目(3-6个月)


**项目5: 在线多人 2D 射击游戏**
- 客户端: Soluna
- 服务器: skynet
- 功能:
  - 实时对战
  - 客户端预测
  - 服务器和解
  - 排行榜
- 学习点: 网络同步、延迟补偿、反外挂



**项目6: 小型 RPG 游戏**
- 引擎: Soluna/Unity
- 功能:
  - 地图编辑器
  - NPC 对话系统
  - 任务系统
  - 战斗系统
  - 背包/装备
- 学习点: 游戏设计、数据驱动、UI 系统



---



## 📖 学习资源推荐



### 书籍

**基础必读**:
1. 《Programming in Lua》(Lua 圣经)
2. 《C Primer Plus》
3. 《深入理解计算机系统》(CSAPP)



**进阶阅读**:
4. 《Game Engine Architecture》(游戏引擎架构)
5. 《Real-Time Rendering》(实时渲染)
6. 《Game Programming Patterns》(游戏编程模式)

---

### 在线课程

**图形学**:
- Games101(闫令琪) - B站/YouTube
- LearnOpenGL.com

**游戏开发**:
- Handmade Hero(Casey Muratori) - 从零实现游戏
- TheCherno C++ & OpenGL 系列

**服务器**:
- skynet 官方 wiki
- Redis 设计与实现

---

### 开源项目阅读

**必读源码**(按难度排序):
1. **Sokol** (3000行) - 单头文件图形库
2. **Soluna** (3000行) - 2D 引擎
3. **skynet** (15000行) - 服务器框架
4. **LÖVE** (开源 2D 引擎)
5. **Godot** (30万行) - 完整游戏引擎

**阅读建议**:
- 从小项目开始(< 5000行)
- 关注架构设计,而非细节实现
- 尝试修改源码,添加新功能
- 写读书笔记,画架构图

---

## 🚀 快速上手指南

### 最小学习路径(3个月速成)

**Week 1-2: Lua 语言**
```lua
-- 每天目标: 写 100 行 Lua 代码
-- 项目: 命令行工具(文件处理/JSON解析/网络请求)
```

**Week 3-4: Sokol 图形库**
```c
// 每天目标: 实现一个 Sokol 示例
// Day 1: Hello Triangle
// Day 2: Textured Quad
// Day 3: Sprite Batch
// Day 4-7: 2D 游戏雏形
```

**Week 5-8: Soluna 源码阅读**
- Week 5: 搭建环境,运行示例
- Week 6: 理解渲染管线
- Week 7: 分析 ltask 多线程
- Week 8: 实现简单游戏


**Week 9-12: skynet 服务器**
- Week 9-10: 学习 Actor 模型
- Week 11: 实现聊天服务器
- Week 12: 联网游戏 Demo


---

## ❓ 常见问题

### Q1: 我应该先学 2D 还是 3D?

**建议先学 2D**:
- 2D 数学简单(只需要线性代数基础)
- 代码量少,容易理解全貌
- 能快速做出可玩的游戏
- Soluna 是绝佳的学习材料

3D 需要:
- 更深的图形学知识(光照/阴影/PBR)
- 更复杂的工具链
- 更多的资源制作成本

---

### Q2: 直接用 Unity 不行吗?为何要学底层?

**Unity 的问题**:
- 黑盒引擎,不知道内部实现
- 性能问题难以优化
- 无法定制核心功能

**学习底层的好处**:
- 理解游戏引擎原理
- 能够深度优化性能
- 面试加分(引擎开发岗位)
- 独立开发者的核心竞争力

**折中方案**:
- 用 Unity 做商业项目(快速变现)
- 用 Soluna/Godot 学习引擎原理
- 读 skynet 源码理解服务器架构

---

### Q3: Lua vs C++ vs C#,该学哪个?

**Lua**:
- ✅ 学习曲线低
- ✅ 与 C 无缝交互
- ✅ 游戏脚本标配
- ❌ 性能不如 C++
- ❌ 工具链不如 C#

**C++**:
- ✅ 性能最强
- ✅ 游戏引擎主流语言
- ✅ 就业面广
- ❌ 学习曲线陡峭
- ❌ 编译慢

**C#**:
- ✅ Unity 御用语言
- ✅ 开发效率高
- ✅ 工具链完善
- ❌ 只能用于 Unity/Godot
- ❌ 性能不如 C++

**建议**:
- 游戏逻辑: **Lua** (易学,够用)
- 引擎开发: **C/C++** (性能需求)
- Unity 开发: **C#** (必须用)

---

### Q4: 云风的技术栈适合商业开发吗?

**适合场景**:
- ✅ 中小型 2D 游戏
- ✅ 独立游戏开发
- ✅ 游戏服务器(skynet 已商用)
- ✅ 技术预研/原型验证

**不适合场景**:
- ❌ 大型 3D MMORPG(用 Unreal)
- ❌ 移动平台主流游戏(用 Unity)
- ❌ 跨平台 AAA 大作

**核心价值**:
- 代码质量高,可作为学习范本
- 架构设计优秀,可借鉴思想
- 开源免费,无授权限制

---

## 🎯 总结

### 云风技术栈的核心价值

1. **代码简洁**: 每个项目都追求极简设计
2. **性能优先**: C 实现核心,Lua 写逻辑
3. **可学习性**: 源码可读性强,适合学习
4. **实战验证**: 所有项目都有商业应用案例

### 学习游戏开发的最佳路径

```
Lua 语言基础
    ↓
Sokol 图形编程
    ↓
Soluna 2D 引擎 ←→ skynet 服务器
    ↓
独立游戏开发 / 引擎研发 / 服务器架构
```

### 关键建议

1. **动手实践**: 每学一个概念,立刻写代码验证
2. **阅读源码**: 从小项目开始,逐步读大项目
3. **做完整项目**: 不要只学碎片知识,要做出完整游戏
4. **理解原理**: 知其然更要知其所以然

---

## 📚 下一步行动

根据你的背景选择起点:

**完全新手**:
→ 先学 Lua 语言(watching_BigMan's Ideas/cloudwu/01-Lua语言基础介绍.md)

**有编程基础**:
→ 直接学 Sokol(watching_BigMan's Ideas/cloudwu/02-Sokol图形库介绍.md)

**后端开发者**:
→ 先学 skynet(克隆仓库,读 wiki)

**图形学背景**:
→ 直接读 Soluna 源码(watching_BigMan's Ideas/cloudwu/04-2D渲染管线架构.md)

---

## 🔗 相关资源

- **云风 Blog**: https://blog.codingnow.com
- **skynet GitHub**: https://github.com/cloudwu/skynet
- **Soluna GitHub**: https://github.com/cloudwu/soluna
- **Sokol 官网**: https://github.com/floooh/sokol
- **本知识库**: watching_BigMan's Ideas/cloudwu/README.md

---

**祝你学习顺利!游戏开发是一场马拉松,享受过程最重要。** 🎮
