# Vue vs React - 项目结构对比

## 1. 创建新项目

### Vue 3 - 使用 Vite

```bash
# 创建项目
npm create vue@latest

# 交互式选项:
✔ Project name: my-vue-app
✔ Add TypeScript? Yes
✔ Add JSX Support? No
✔ Add Vue Router? Yes
✔ Add Pinia? Yes
✔ Add Vitest? Yes
✔ Add ESLint? Yes
✔ Add Prettier? Yes

cd my-vue-app
npm install
npm run dev
```

### React - 使用 Vite

```bash
# 创建项目
npm create vite@latest

# 选择:
✔ Project name: my-react-app
✔ Select a framework: React
✔ Select a variant: TypeScript

cd my-react-app
npm install
npm run dev
```

## 2. 项目目录结构对比

### 2.1 Vue 3 项目结构

```
my-vue-app/
├── public/                    # 静态资源
│   └── favicon.ico
│
├── src/
│   ├── assets/               # 资源文件
│   │   ├── images/
│   │   ├── styles/
│   │   │   └── main.css
│   │   └── logo.svg
│   │
│   ├── components/           # 组件目录
│   │   ├── common/           # 通用组件
│   │   │   ├── Button.vue
│   │   │   ├── Input.vue
│   │   │   └── Modal.vue
│   │   │
│   │   ├── layout/           # 布局组件
│   │   │   ├── Header.vue
│   │   │   ├── Footer.vue
│   │   │   └── Sidebar.vue
│   │   │
│   │   └── HelloWorld.vue
│   │
│   ├── views/                # 页面组件
│   │   ├── Home.vue
│   │   ├── About.vue
│   │   ├── User/
│   │   │   ├── UserList.vue
│   │   │   ├── UserDetail.vue
│   │   │   └── UserEdit.vue
│   │   └── NotFound.vue
│   │
│   ├── router/               # 路由配置
│   │   └── index.ts
│   │
│   ├── stores/               # Pinia 状态管理
│   │   ├── counter.ts
│   │   ├── user.ts
│   │   └── index.ts
│   │
│   ├── composables/          # 组合式函数
│   │   ├── useAuth.ts
│   │   ├── useFetch.ts
│   │   └── useDebounce.ts
│   │
│   ├── utils/                # 工具函数
│   │   ├── api.ts
│   │   ├── format.ts
│   │   └── validate.ts
│   │
│   ├── types/                # TypeScript 类型
│   │   ├── user.ts
│   │   ├── post.ts
│   │   └── common.ts
│   │
│   ├── api/                  # API 接口
│   │   ├── user.ts
│   │   ├── post.ts
│   │   └── index.ts
│   │
│   ├── App.vue              # 根组件
│   └── main.ts              # 入口文件
│
├── index.html               # HTML 模板
├── vite.config.ts          # Vite 配置
├── tsconfig.json           # TypeScript 配置
├── package.json            # 项目配置
└── README.md               # 说明文档
```

### 2.2 React 项目结构

```
my-react-app/
├── public/                    # 静态资源
│   └── favicon.ico
│
├── src/
│   ├── assets/               # 资源文件
│   │   ├── images/
│   │   ├── styles/
│   │   │   └── index.css
│   │   └── logo.svg
│   │
│   ├── components/           # 组件目录
│   │   ├── common/           # 通用组件
│   │   │   ├── Button.tsx
│   │   │   ├── Button.module.css
│   │   │   ├── Input.tsx
│   │   │   └── Modal.tsx
│   │   │
│   │   ├── layout/           # 布局组件
│   │   │   ├── Header.tsx
│   │   │   ├── Footer.tsx
│   │   │   └── Sidebar.tsx
│   │   │
│   │   └── HelloWorld.tsx
│   │
│   ├── pages/                # 页面组件
│   │   ├── Home.tsx
│   │   ├── About.tsx
│   │   ├── User/
│   │   │   ├── UserList.tsx
│   │   │   ├── UserDetail.tsx
│   │   │   └── UserEdit.tsx
│   │   └── NotFound.tsx
│   │
│   ├── routes/               # 路由配置
│   │   └── index.tsx
│   │
│   ├── store/                # Redux/Zustand 状态
│   │   ├── slices/
│   │   │   ├── counterSlice.ts
│   │   │   └── userSlice.ts
│   │   └── index.ts
│   │
│   ├── hooks/                # 自定义 Hooks
│   │   ├── useAuth.ts
│   │   ├── useFetch.ts
│   │   └── useDebounce.ts
│   │
│   ├── utils/                # 工具函数
│   │   ├── api.ts
│   │   ├── format.ts
│   │   └── validate.ts
│   │
│   ├── types/                # TypeScript 类型
│   │   ├── user.ts
│   │   ├── post.ts
│   │   └── common.ts
│   │
│   ├── api/                  # API 接口
│   │   ├── user.ts
│   │   ├── post.ts
│   │   └── index.ts
│   │
│   ├── App.tsx              # 根组件
│   ├── App.css              # 根组件样式
│   └── main.tsx             # 入口文件
│
├── index.html               # HTML 模板
├── vite.config.ts          # Vite 配置
├── tsconfig.json           # TypeScript 配置
├── package.json            # 项目配置
└── README.md               # 说明文档
```

## 3. 关键文件对比

### 3.1 入口文件

#### Vue - main.ts

```typescript
// src/main.ts
import { createApp } from 'vue'
import { createPinia } from 'pinia'

import App from './App.vue'
import router from './router'

// 导入全局样式
import './assets/main.css'

const app = createApp(App)

// 使用 Pinia (状态管理)
app.use(createPinia())

// 使用 Vue Router
app.use(router)

// 挂载应用
app.mount('#app')
```

#### React - main.tsx

```typescript
// src/main.tsx
import React from 'react'
import ReactDOM from 'react-dom/client'
import { BrowserRouter } from 'react-router-dom'
import { Provider } from 'react-redux'

import App from './App.tsx'
import { store } from './store'

// 导入全局样式
import './index.css'

ReactDOM.createRoot(document.getElementById('root')!).render(
  <React.StrictMode>
    <Provider store={store}>
      <BrowserRouter>
        <App />
      </BrowserRouter>
    </Provider>
  </React.StrictMode>
)
```

### 3.2 根组件

#### Vue - App.vue

```vue
<!-- src/App.vue -->
<template>
  <div id="app">
    <RouterView />
  </div>
</template>

<script setup lang="ts">
import { RouterView } from 'vue-router'
import { onMounted } from 'vue'

onMounted(() => {
  console.log('App mounted')
})
</script>

<style scoped>
#app {
  font-family: Avenir, Helvetica, Arial, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}
</style>
```

#### React - App.tsx

```typescript
// src/App.tsx
import React, { useEffect } from 'react'
import { Routes, Route } from 'react-router-dom'
import Home from './pages/Home'
import About from './pages/About'
import './App.css'

function App() {
  useEffect(() => {
    console.log('App mounted')
  }, [])

  return (
    <div id="app">
      <Routes>
        <Route path="/" element={<Home />} />
        <Route path="/about" element={<About />} />
      </Routes>
    </div>
  )
}

export default App
```

### 3.3 路由配置

#### Vue - router/index.ts

```typescript
// src/router/index.ts
import { createRouter, createWebHistory } from 'vue-router'
import Home from '../views/Home.vue'

const router = createRouter({
  history: createWebHistory(import.meta.env.BASE_URL),
  routes: [
    {
      path: '/',
      name: 'home',
      component: Home
    },
    {
      path: '/about',
      name: 'about',
      // 路由懒加载
      component: () => import('../views/About.vue')
    },
    {
      path: '/user/:id',
      name: 'user',
      component: () => import('../views/User/UserDetail.vue'),
      props: true // 将路由参数作为 props 传递
    }
  ]
})

// 路由守卫
router.beforeEach((to, from, next) => {
  // 认证检查
  if (to.meta.requiresAuth && !isAuthenticated()) {
    next('/login')
  } else {
    next()
  }
})

export default router
```

#### React - routes/index.tsx

```typescript
// src/routes/index.tsx
import React, { lazy, Suspense } from 'react'
import { Routes, Route, Navigate } from 'react-router-dom'

// 懒加载
const Home = lazy(() => import('../pages/Home'))
const About = lazy(() => import('../pages/About'))
const UserDetail = lazy(() => import('../pages/User/UserDetail'))

// 路由守卫组件
function ProtectedRoute({ children }: { children: React.ReactNode }) {
  const isAuth = useAuth()
  return isAuth ? <>{children}</> : <Navigate to="/login" />
}

export function AppRoutes() {
  return (
    <Suspense fallback={<div>Loading...</div>}>
      <Routes>
        <Route path="/" element={<Home />} />
        <Route path="/about" element={<About />} />

        {/* 受保护的路由 */}
        <Route
          path="/user/:id"
          element={
            <ProtectedRoute>
              <UserDetail />
            </ProtectedRoute>
          }
        />

        {/* 404 */}
        <Route path="*" element={<div>404 Not Found</div>} />
      </Routes>
    </Suspense>
  )
}
```

### 3.4 状态管理

#### Vue - Pinia

```typescript
// src/stores/counter.ts
import { defineStore } from 'pinia'
import { ref, computed } from 'vue'

export const useCounterStore = defineStore('counter', () => {
  // State
  const count = ref(0)
  const name = ref('Counter Store')

  // Getters (computed)
  const doubleCount = computed(() => count.value * 2)

  // Actions (methods)
  function increment() {
    count.value++
  }

  function decrement() {
    count.value--
  }

  async function fetchCount() {
    const response = await fetch('/api/count')
    count.value = await response.json()
  }

  return {
    count,
    name,
    doubleCount,
    increment,
    decrement,
    fetchCount
  }
})

// 使用:
// import { useCounterStore } from '@/stores/counter'
// const counter = useCounterStore()
// counter.increment()
```

#### React - Redux Toolkit

```typescript
// src/store/slices/counterSlice.ts
import { createSlice, createAsyncThunk, PayloadAction } from '@reduxjs/toolkit'

interface CounterState {
  value: number
  status: 'idle' | 'loading' | 'failed'
}

const initialState: CounterState = {
  value: 0,
  status: 'idle'
}

// 异步 action
export const fetchCount = createAsyncThunk(
  'counter/fetchCount',
  async () => {
    const response = await fetch('/api/count')
    return response.json()
  }
)

export const counterSlice = createSlice({
  name: 'counter',
  initialState,
  reducers: {
    increment: (state) => {
      state.value += 1
    },
    decrement: (state) => {
      state.value -= 1
    },
    incrementByAmount: (state, action: PayloadAction<number>) => {
      state.value += action.payload
    }
  },
  extraReducers: (builder) => {
    builder
      .addCase(fetchCount.pending, (state) => {
        state.status = 'loading'
      })
      .addCase(fetchCount.fulfilled, (state, action) => {
        state.status = 'idle'
        state.value = action.payload
      })
  }
})

export const { increment, decrement, incrementByAmount } = counterSlice.actions

// Selectors
export const selectCount = (state: RootState) => state.counter.value
export const selectDoubleCount = (state: RootState) => state.counter.value * 2

export default counterSlice.reducer

// 使用:
// import { useDispatch, useSelector } from 'react-redux'
// import { increment, selectCount } from './slices/counterSlice'
// const dispatch = useDispatch()
// const count = useSelector(selectCount)
// dispatch(increment())
```

## 4. 组件文件结构对比

### Vue 组件示例

```
components/
└── UserCard/
    ├── UserCard.vue          # 组件主文件
    ├── UserCard.test.ts      # 测试文件
    └── index.ts              # 导出文件
```

```vue
<!-- UserCard.vue -->
<template>
  <div class="user-card">
    <img :src="user.avatar" :alt="user.name">
    <h3>{{ user.name }}</h3>
    <p>{{ user.bio }}</p>
    <button @click="handleClick">关注</button>
  </div>
</template>

<script setup lang="ts">
interface User {
  id: number
  name: string
  avatar: string
  bio: string
}

const props = defineProps<{
  user: User
}>()

const emit = defineEmits<{
  follow: [userId: number]
}>()

const handleClick = () => {
  emit('follow', props.user.id)
}
</script>

<style scoped>
.user-card {
  padding: 20px;
  border: 1px solid #ccc;
  border-radius: 8px;
}

.user-card img {
  width: 100px;
  height: 100px;
  border-radius: 50%;
}
</style>
```

### React 组件示例

```
components/
└── UserCard/
    ├── UserCard.tsx          # 组件主文件
    ├── UserCard.module.css   # 样式文件
    ├── UserCard.test.tsx     # 测试文件
    └── index.ts              # 导出文件
```

```typescript
// UserCard.tsx
import React from 'react'
import styles from './UserCard.module.css'

interface User {
  id: number
  name: string
  avatar: string
  bio: string
}

interface UserCardProps {
  user: User
  onFollow: (userId: number) => void
}

export function UserCard({ user, onFollow }: UserCardProps) {
  const handleClick = () => {
    onFollow(user.id)
  }

  return (
    <div className={styles.userCard}>
      <img src={user.avatar} alt={user.name} />
      <h3>{user.name}</h3>
      <p>{user.bio}</p>
      <button onClick={handleClick}>关注</button>
    </div>
  )
}
```

```css
/* UserCard.module.css */
.userCard {
  padding: 20px;
  border: 1px solid #ccc;
  border-radius: 8px;
}

.userCard img {
  width: 100px;
  height: 100px;
  border-radius: 50%;
}
```

## 5. 配置文件对比

### Vite 配置

#### Vue

```typescript
// vite.config.ts
import { defineConfig } from 'vite'
import vue from '@vitejs/plugin-vue'
import { fileURLToPath, URL } from 'node:url'

export default defineConfig({
  plugins: [vue()],
  resolve: {
    alias: {
      '@': fileURLToPath(new URL('./src', import.meta.url))
    }
  },
  server: {
    port: 5173,
    proxy: {
      '/api': {
        target: 'http://localhost:3000',
        changeOrigin: true
      }
    }
  }
})
```

#### React

```typescript
// vite.config.ts
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'
import path from 'path'

export default defineConfig({
  plugins: [react()],
  resolve: {
    alias: {
      '@': path.resolve(__dirname, './src')
    }
  },
  server: {
    port: 5173,
    proxy: {
      '/api': {
        target: 'http://localhost:3000',
        changeOrigin: true
      }
    }
  }
})
```

## 6. 目录命名惯例

### Vue 项目

```
约定:
├─ components/    # 组件用 PascalCase: UserCard.vue
├─ views/         # 页面也用 PascalCase: Home.vue
├─ composables/   # 组合式函数用 use 前缀: useAuth.ts
├─ stores/        # Store 用 camelCase: counterStore.ts
└─ utils/         # 工具用 camelCase: formatDate.ts
```

### React 项目

```
约定:
├─ components/    # 组件用 PascalCase: UserCard.tsx
├─ pages/         # 页面用 PascalCase: Home.tsx
├─ hooks/         # Hooks 用 use 前缀: useAuth.ts
├─ store/         # Store 相关: counterSlice.ts
└─ utils/         # 工具用 camelCase: formatDate.ts
```

## 7. 总结

### 相似之处

- ✅ 都使用组件化开发
- ✅ 都支持 TypeScript
- ✅ 都有路由和状态管理
- ✅ 都用 Vite 构建
- ✅ 目录结构大体相似

### 主要差异

| 特性 | Vue | React |
|------|-----|-------|
| **组件文件** | `.vue` (单文件) | `.tsx` (分离样式) |
| **样式方案** | Scoped CSS | CSS Modules |
| **状态管理** | Pinia (官方) | Redux/Zustand (社区) |
| **路由** | Vue Router (官方) | React Router (社区) |
| **目录名** | composables | hooks |

---

**下一步: 阅读 03-语法特性深度对比.md 了解更多细节差异**
