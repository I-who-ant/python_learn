# Agentå¼€å‘å®Œæ•´æŠ€æœ¯æ ˆæŒ‡å—

## æ‚¨çš„Agentä¹‹è·¯

### ä¸ºä»€ä¹ˆé€‰æ‹©Agentå¼€å‘?

```
æ‚¨çš„æŠ€æœ¯èƒŒæ™¯:
âœ… JavaWeb - åç«¯æœåŠ¡èƒ½åŠ›
âœ… Python - AI/MLåŸºç¡€
âœ… Flask - è½»é‡çº§Web
âœ… CLIå·¥å…· - ç”¨æˆ·äº¤äº’
âœ… Linux - å¼€å‘ç¯å¢ƒ
âœ… MCPåè®® - Agenté€šä¿¡

å®Œç¾å¥‘åˆAgentå¼€å‘!
```

---

## AgentæŠ€æœ¯æ ˆå…¨æ™¯å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   ç”¨æˆ·å±‚                            â”‚
â”‚  CLIç•Œé¢ / Webç•Œé¢ / APIæ¥å£ / é›†æˆåº”ç”¨             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 Agentåº”ç”¨å±‚                         â”‚
â”‚  å¯¹è¯Agent / ä»»åŠ¡Agent / åä½œAgent / è‡ªä¸»Agent      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 Agentæ¡†æ¶å±‚                         â”‚
â”‚  LangChain / LlamaIndex / AutoGen / CrewAI         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  åè®®/å·¥å…·å±‚                        â”‚
â”‚  MCP / Function Calling / Tool Use / Memory        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   AIæ¨¡å‹å±‚                          â”‚
â”‚  LLM / Embedding / Vector DB / RAG                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  åŸºç¡€è®¾æ–½å±‚                         â”‚
â”‚  Python / Rust / Java / Docker / K8s               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ç¬¬ä¸€éƒ¨åˆ†:æ ¸å¿ƒæ¡†æ¶é€‰æ‹©

### 1. LangChain - æœ€æµè¡Œ â­â­â­â­â­

#### ç®€ä»‹
```
å®šä½: å…¨åŠŸèƒ½Agentå¼€å‘æ¡†æ¶
è¯­è¨€: Python / TypeScript
ç‰¹ç‚¹: ç”Ÿæ€æœ€æˆç†Ÿã€ç»„ä»¶ä¸°å¯Œ
é€‚åˆ: å¿«é€Ÿå¼€å‘ã€å®Œæ•´åº”ç”¨
```

#### æ ¸å¿ƒç»„ä»¶

```python
from langchain.agents import AgentExecutor, create_openai_tools_agent
from langchain.tools import Tool
from langchain_openai import ChatOpenAI
from langchain import hub

# 1. å®šä¹‰å·¥å…·
def search_tool(query: str) -> str:
    """æœç´¢å·¥å…·"""
    return f"Search results for: {query}"

tools = [
    Tool(
        name="Search",
        func=search_tool,
        description="æœç´¢äº’è”ç½‘ä¿¡æ¯"
    )
]

# 2. åˆå§‹åŒ–æ¨¡å‹
llm = ChatOpenAI(model="gpt-4", temperature=0)

# 3. åˆ›å»ºAgent
prompt = hub.pull("hwchase17/openai-tools-agent")
agent = create_openai_tools_agent(llm, tools, prompt)

# 4. æ‰§è¡Œå™¨
agent_executor = AgentExecutor(
    agent=agent,
    tools=tools,
    verbose=True
)

# 5. è¿è¡Œ
result = agent_executor.invoke({
    "input": "æœç´¢æœ€æ–°çš„AIæ–°é—»"
})
```

#### ä¸»è¦æ¨¡å—

```
LangChainæ ¸å¿ƒæ¨¡å—:

1. Models (æ¨¡å‹)
   â”œâ”€â”€ LLMs (å¤§è¯­è¨€æ¨¡å‹)
   â”œâ”€â”€ Chat Models (èŠå¤©æ¨¡å‹)
   â””â”€â”€ Embeddings (å‘é‡åŒ–)

2. Prompts (æç¤º)
   â”œâ”€â”€ Prompt Templates
   â”œâ”€â”€ Few-shot Examples
   â””â”€â”€ Output Parsers

3. Chains (é“¾)
   â”œâ”€â”€ LLMChain (åŸºç¡€é“¾)
   â”œâ”€â”€ Sequential Chain (é¡ºåºé“¾)
   â””â”€â”€ Router Chain (è·¯ç”±é“¾)

4. Agents (æ™ºèƒ½ä½“)
   â”œâ”€â”€ ReAct Agent
   â”œâ”€â”€ OpenAI Functions Agent
   â””â”€â”€ Custom Agent

5. Memory (è®°å¿†)
   â”œâ”€â”€ Conversation Buffer
   â”œâ”€â”€ Summary Memory
   â””â”€â”€ Vector Store Memory

6. Tools (å·¥å…·)
   â”œâ”€â”€ å†…ç½®å·¥å…·(æœç´¢ã€è®¡ç®—ç­‰)
   â”œâ”€â”€ è‡ªå®šä¹‰å·¥å…·
   â””â”€â”€ Tool Calling

7. Retrievers (æ£€ç´¢)
   â”œâ”€â”€ Vector Store
   â”œâ”€â”€ BM25
   â””â”€â”€ Hybrid Search
```

#### å®æˆ˜ç¤ºä¾‹:å®Œæ•´çš„RAG Agent

```python
from langchain.embeddings import OpenAIEmbeddings
from langchain.vectorstores import Chroma
from langchain.text_splitter import RecursiveCharacterTextSplitter
from langchain.chains import RetrievalQA
from langchain.document_loaders import TextLoader

# 1. åŠ è½½æ–‡æ¡£
loader = TextLoader("docs.txt")
documents = loader.load()

# 2. åˆ†å‰²æ–‡æ¡£
text_splitter = RecursiveCharacterTextSplitter(
    chunk_size=1000,
    chunk_overlap=200
)
splits = text_splitter.split_documents(documents)

# 3. å‘é‡åŒ–å­˜å‚¨
vectorstore = Chroma.from_documents(
    documents=splits,
    embedding=OpenAIEmbeddings()
)

# 4. åˆ›å»ºæ£€ç´¢å™¨
retriever = vectorstore.as_retriever(
    search_type="similarity",
    search_kwargs={"k": 3} #  è¿”å›3ä¸ªæœ€ç›¸å…³çš„æ–‡æ¡£
)

# 5. åˆ›å»ºQAé“¾
qa_chain = RetrievalQA.from_chain_type(
    llm=ChatOpenAI(model="gpt-4"),
    chain_type="stuff",
    retriever=retriever,
    return_source_documents=True
)

# 6. æŸ¥è¯¢
result = qa_chain({"query": "ä»€ä¹ˆæ˜¯Agent?"})
print(result['result'])
```

---

### 2. LlamaIndex - æ•°æ®é©±åŠ¨ â­â­â­â­

#### ç®€ä»‹
```
å®šä½: æ•°æ®å¢å¼ºçš„Agentæ¡†æ¶
ç‰¹ç‚¹: RAGå¼ºå¤§ã€æ•°æ®ç´¢å¼•ä¼˜ç§€
é€‚åˆ: çŸ¥è¯†åº“é—®ç­”ã€æ–‡æ¡£åˆ†æ
```

#### æ ¸å¿ƒæ¦‚å¿µ

```python
from llama_index import VectorStoreIndex, SimpleDirectoryReader
from llama_index.node_parser import SimpleNodeParser
from llama_index.llms import OpenAI

# 1. åŠ è½½æ•°æ®
documents = SimpleDirectoryReader('data').load_data()

# 2. è§£æèŠ‚ç‚¹
parser = SimpleNodeParser.from_defaults()
nodes = parser.get_nodes_from_documents(documents)

# 3. åˆ›å»ºç´¢å¼•
index = VectorStoreIndex(nodes)

# 4. æŸ¥è¯¢å¼•æ“
query_engine = index.as_query_engine(
    llm=OpenAI(model="gpt-4"),
    similarity_top_k=5
)

# 5. æŸ¥è¯¢
response = query_engine.query("Agentçš„å·¥ä½œåŸç†æ˜¯ä»€ä¹ˆ?")
print(response)
```

#### LlamaIndex vs LangChain

```
LangChain:
âœ… Agentèƒ½åŠ›æ›´å¼º
âœ… å·¥å…·ç”Ÿæ€ä¸°å¯Œ
âœ… ç¤¾åŒºæ´»è·ƒ
âš ï¸ å¤æ‚åº¦é«˜

LlamaIndex:
âœ… RAGèƒ½åŠ›å¼º
âœ… æ•°æ®å¤„ç†ä¼˜ç§€
âœ… APIç®€æ´
âš ï¸ AgentåŠŸèƒ½ç›¸å¯¹å¼±

å»ºè®®: ä¸¤è€…ç»“åˆä½¿ç”¨!
```

---

### 3. AutoGen - å¤šAgentåä½œ â­â­â­â­

#### ç®€ä»‹
```
å¼€å‘è€…: Microsoft
å®šä½: å¤šAgentåä½œæ¡†æ¶
ç‰¹ç‚¹: Agentå¯¹è¯ã€è‡ªåŠ¨åä½œ
é€‚åˆ: å¤æ‚ä»»åŠ¡ã€å›¢é˜Ÿåä½œ
```

#### ç¤ºä¾‹:åŒAgentåä½œ

```python
import autogen

# 1. é…ç½®
config_list = [{
    "model": "gpt-4",
    "api_key": "your-key"
}]

# 2. åˆ›å»ºåŠ©æ‰‹Agent
assistant = autogen.AssistantAgent(
    name="assistant",
    llm_config={
        "config_list": config_list,
        "temperature": 0
    }
)

# 3. åˆ›å»ºç”¨æˆ·ä»£ç†
user_proxy = autogen.UserProxyAgent(
    name="user_proxy",
    human_input_mode="NEVER",
    max_consecutive_auto_reply=10,
    code_execution_config={
        "work_dir": "coding",
        "use_docker": False
    }
)

# 4. å¼€å§‹å¯¹è¯
user_proxy.initiate_chat(
    assistant,
    message="å†™ä¸€ä¸ªPythonçˆ¬è™«çˆ¬å–æ–°é—»"
)
```

---

### 4. CrewAI - è§’è‰²æ‰®æ¼” â­â­â­

#### ç®€ä»‹
```
å®šä½: è§’è‰²åŒ–Agentå›¢é˜Ÿ
ç‰¹ç‚¹: æ˜ç¡®åˆ†å·¥ã€åä½œæµç¨‹
é€‚åˆ: æ¨¡æ‹Ÿå›¢é˜Ÿå·¥ä½œæµ
```

#### ç¤ºä¾‹:ç ”ç©¶å›¢é˜Ÿ

```python
from crewai import Agent, Task, Crew

# 1. å®šä¹‰ç ”ç©¶å‘˜
researcher = Agent(
    role='ç ”ç©¶å‘˜',
    goal='ç ”ç©¶AIé¢†åŸŸæœ€æ–°è¿›å±•',
    backstory='ä½ æ˜¯AIé¢†åŸŸçš„ä¸“å®¶ç ”ç©¶å‘˜',
    verbose=True
)

# 2. å®šä¹‰ä½œè€…
writer = Agent(
    role='æŠ€æœ¯ä½œè€…',
    goal='å°†ç ”ç©¶æˆæœå†™æˆæ–‡ç« ',
    backstory='ä½ æ˜¯ç»éªŒä¸°å¯Œçš„æŠ€æœ¯ä½œå®¶',
    verbose=True
)

# 3. å®šä¹‰ä»»åŠ¡
research_task = Task(
    description='ç ”ç©¶2024å¹´AgentæŠ€æœ¯è¿›å±•',
    agent=researcher
)

write_task = Task(
    description='å°†ç ”ç©¶æˆæœå†™æˆåšå®¢æ–‡ç« ',
    agent=writer
)

# 4. ç»„å»ºå›¢é˜Ÿ
crew = Crew(
    agents=[researcher, writer],
    tasks=[research_task, write_task],
    verbose=True
)

# 5. æ‰§è¡Œ
result = crew.kickoff()
```

---

## ç¬¬äºŒéƒ¨åˆ†:MCPåè®®æ·±å…¥

### MCP (Model Context Protocol)

#### ä»€ä¹ˆæ˜¯MCP?

```
å®šä¹‰:
- Anthropicå¼€å‘çš„æ ‡å‡†åè®®
- è¿æ¥AIæ¨¡å‹å’Œå¤–éƒ¨å·¥å…·
- ç±»ä¼¼äº"Agentçš„USBæ¥å£"

ä½œç”¨:
âœ… æ ‡å‡†åŒ–å·¥å…·è°ƒç”¨
âœ… ä¸Šä¸‹æ–‡ç®¡ç†
âœ… å¤šæ¨¡å‹å…¼å®¹
âœ… å®‰å…¨éš”ç¦»
```

#### MCPæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Client    â”‚ (Agentåº”ç”¨)
â”‚  (Your App) â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚ MCP Protocol
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MCP Server â”‚ (å·¥å…·æä¾›è€…)
â”‚   (Tools)   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Resources  â”‚ (æ–‡ä»¶ã€APIã€æ•°æ®åº“ç­‰)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### MCP Serverç¤ºä¾‹

```python
from mcp.server import Server
from mcp.types import Tool, TextContent

# 1. åˆ›å»ºMCP Server
server = Server("my-tools")

# 2. å®šä¹‰å·¥å…·
@server.tool()
async def search_code(
    query: str,
    language: str = "python"
) -> str:
    """æœç´¢ä»£ç ç‰‡æ®µ"""
    # å®ç°æœç´¢é€»è¾‘
    return f"æœç´¢ {language} ä»£ç : {query}"

@server.tool()
async def run_code(
    code: str,
    language: str = "python"
) -> str:
    """æ‰§è¡Œä»£ç """
    # å®ç°ä»£ç æ‰§è¡Œ
    return f"æ‰§è¡Œç»“æœ: ..."

# 3. å®šä¹‰èµ„æº
@server.resource("file://{path}")
async def read_file(path: str) -> str:
    """è¯»å–æ–‡ä»¶"""
    with open(path) as f:
        return f.read()

# 4. å¯åŠ¨æœåŠ¡
if __name__ == "__main__":
    server.run()
```

#### MCP Clientä½¿ç”¨

```python
from mcp.client import Client

# 1. è¿æ¥MCP Server
client = Client()
await client.connect("my-tools")

# 2. åˆ—å‡ºå¯ç”¨å·¥å…·
tools = await client.list_tools()
print(tools)

# 3. è°ƒç”¨å·¥å…·
result = await client.call_tool(
    "search_code",
    arguments={"query": "å¿«é€Ÿæ’åº", "language": "python"}
)
print(result)

# 4. è®¿é—®èµ„æº
content = await client.read_resource("file:///path/to/file.txt")
print(content)
```

---

## ç¬¬ä¸‰éƒ¨åˆ†:CLIå·¥å…·å¼€å‘

### æ‚¨å·²äº†è§£çš„åº“æ·±å…¥åº”ç”¨

#### 1. Rich - ç¾åŒ–è¾“å‡º â­â­â­â­â­

```python
from rich.console import Console
from rich.progress import track
from rich.table import Table
from rich.panel import Panel
from rich.markdown import Markdown
from rich.syntax import Syntax

console = Console()

# Agentå¯¹è¯ç•Œé¢
def agent_chat():
    # æ¬¢è¿é¢æ¿
    console.print(Panel(
        "[bold blue]AI Agent[/bold blue]\n"
        "ä½ çš„æ™ºèƒ½åŠ©æ‰‹",
        title="æ¬¢è¿",
        border_style="blue"
    ))

    while True:
        # ç”¨æˆ·è¾“å…¥
        user_input = console.input("[bold green]You:[/bold green] ")

        # æ˜¾ç¤ºæ€è€ƒè¿‡ç¨‹
        with console.status("[bold yellow]æ€è€ƒä¸­...", spinner="dots"):
            response = agent.run(user_input)

        # Agentå›å¤
        console.print(Panel(
            response,
            title="[bold magenta]Agent",
            border_style="magenta"
        ))

# æ˜¾ç¤ºAgentå·¥å…·è°ƒç”¨
def show_tool_calls(tools):
    table = Table(title="å·¥å…·è°ƒç”¨è®°å½•")
    table.add_column("å·¥å…·", style="cyan")
    table.add_column("å‚æ•°", style="green")
    table.add_column("ç»“æœ", style="yellow")

    for tool in tools:
        table.add_row(
            tool.name,
            str(tool.args),
            tool.result[:50] + "..."
        )

    console.print(table)

# æ˜¾ç¤ºä»£ç 
def show_code(code, language="python"):
    syntax = Syntax(code, language, theme="monokai")
    console.print(Panel(syntax, title="ç”Ÿæˆçš„ä»£ç "))
```

#### 2. PromptToolkit - äº¤äº’å¼è¾“å…¥ â­â­â­â­â­

```python
from prompt_toolkit import PromptSession
from prompt_toolkit.completion import WordCompleter
from prompt_toolkit.history import FileHistory
from prompt_toolkit.auto_suggest import AutoSuggestFromHistory
from prompt_toolkit.styles import Style

# 1. è‡ªå®šä¹‰æ ·å¼
style = Style.from_dict({
    'prompt': 'ansicyan bold',
    'input': 'ansigreen',
})

# 2. å‘½ä»¤è¡¥å…¨
commands = WordCompleter([
    '/help', '/clear', '/exit',
    '/tools', '/history', '/save'
], ignore_case=True)

# 3. åˆ›å»ºä¼šè¯
session = PromptSession(
    history=FileHistory('.agent_history'),
    auto_suggest=AutoSuggestFromHistory(),
    completer=commands,
    style=style
)

# 4. Agentäº¤äº’å¾ªç¯
def agent_repl():
    console.print("[bold]Agent CLI v1.0")
    console.print("è¾“å…¥ /help æŸ¥çœ‹å¸®åŠ©\n")

    while True:
        try:
            # è·å–ç”¨æˆ·è¾“å…¥
            user_input = session.prompt(
                '>>> ',
                style=style
            )

            # å¤„ç†å‘½ä»¤
            if user_input.startswith('/'):
                handle_command(user_input)
            else:
                # Agentå¤„ç†
                response = agent.run(user_input)
                console.print(f"\n{response}\n")

        except KeyboardInterrupt:
            continue
        except EOFError:
            break

def handle_command(cmd):
    if cmd == '/help':
        show_help()
    elif cmd == '/tools':
        list_tools()
    elif cmd == '/history':
        show_history()
    elif cmd == '/exit':
        console.print("å†è§!")
        exit(0)
```

#### 3. Click/Typer - å‘½ä»¤è¡Œæ¡†æ¶ â­â­â­â­

##### Typerç¤ºä¾‹(æ›´ç°ä»£)

```python
import typer
from typing import Optional
from enum import Enum

app = typer.Typer()

class Model(str, Enum):
    gpt4 = "gpt-4"
    gpt35 = "gpt-3.5-turbo"
    claude = "claude-3"

@app.command()
def chat(
    message: str = typer.Argument(..., help="è¦å‘é€çš„æ¶ˆæ¯"),
    model: Model = typer.Option(Model.gpt4, help="ä½¿ç”¨çš„æ¨¡å‹"),
    temperature: float = typer.Option(0.7, help="æ¸©åº¦å‚æ•°"),
    verbose: bool = typer.Option(False, "--verbose", "-v", help="è¯¦ç»†è¾“å‡º")
):
    """
    ä¸Agentå¯¹è¯
    """
    if verbose:
        typer.echo(f"ä½¿ç”¨æ¨¡å‹: {model.value}")
        typer.echo(f"æ¸©åº¦: {temperature}")

    # Agentå¤„ç†
    response = agent.run(message, model=model.value, temperature=temperature)
    typer.echo(response)

@app.command()
def tools():
    """åˆ—å‡ºå¯ç”¨å·¥å…·"""
    tool_list = agent.list_tools()

    for tool in tool_list:
        typer.echo(f"- {tool.name}: {tool.description}")

@app.command()
def interactive():
    """äº¤äº’å¼æ¨¡å¼"""
    agent_repl()  # ä½¿ç”¨ä¸Šé¢çš„PromptToolkit

if __name__ == "__main__":
    app()
```

ä½¿ç”¨:
```bash
# å•æ¬¡å¯¹è¯
python agent.py chat "å¸®æˆ‘æœç´¢Pythonæ•™ç¨‹"

# æŒ‡å®šæ¨¡å‹
python agent.py chat "å†™ä¸ªæ’åºç®—æ³•" --model gpt-3.5-turbo

# è¯¦ç»†è¾“å‡º
python agent.py chat "åˆ†æè¿™æ®µä»£ç " -v

# åˆ—å‡ºå·¥å…·
python agent.py tools

# äº¤äº’æ¨¡å¼
python agent.py interactive
```

---

## ç¬¬å››éƒ¨åˆ†:å®Œæ•´Agentåº”ç”¨æ¶æ„

### é¡¹ç›®ç»“æ„

```
agent-project/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ agent/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ core.py           # Agentæ ¸å¿ƒé€»è¾‘
â”‚   â”‚   â”œâ”€â”€ tools.py          # å·¥å…·å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ memory.py         # è®°å¿†ç®¡ç†
â”‚   â”‚   â””â”€â”€ prompts.py        # Promptæ¨¡æ¿
â”‚   â”‚
â”‚   â”œâ”€â”€ mcp/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ server.py         # MCP Server
â”‚   â”‚   â””â”€â”€ client.py         # MCP Client
â”‚   â”‚
â”‚   â”œâ”€â”€ cli/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ main.py           # CLIå…¥å£
â”‚   â”‚   â”œâ”€â”€ commands.py       # å‘½ä»¤å¤„ç†
â”‚   â”‚   â””â”€â”€ ui.py             # UIç»„ä»¶
â”‚   â”‚
â”‚   â”œâ”€â”€ web/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ app.py            # Flaskåº”ç”¨
â”‚   â”‚   â”œâ”€â”€ routes.py         # è·¯ç”±
â”‚   â”‚   â””â”€â”€ templates/        # æ¨¡æ¿
â”‚   â”‚
â”‚   â”œâ”€â”€ vector/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ store.py          # å‘é‡å­˜å‚¨
â”‚   â”‚   â””â”€â”€ retriever.py      # æ£€ç´¢å™¨
â”‚   â”‚
â”‚   â””â”€â”€ utils/
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ config.py         # é…ç½®
â”‚       â””â”€â”€ logger.py         # æ—¥å¿—
â”‚
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ test_agent.py
â”‚   â”œâ”€â”€ test_tools.py
â”‚   â””â”€â”€ test_mcp.py
â”‚
â”œâ”€â”€ data/                     # çŸ¥è¯†åº“
â”œâ”€â”€ logs/                     # æ—¥å¿—
â”œâ”€â”€ pyproject.toml           # ä¾èµ–ç®¡ç†
â”œâ”€â”€ Dockerfile
â””â”€â”€ README.md
```

### æ ¸å¿ƒä»£ç ç¤ºä¾‹

#### agent/core.py
```python
from langchain.agents import AgentExecutor, create_openai_tools_agent
from langchain_openai import ChatOpenAI
from langchain.memory import ConversationBufferMemory
from .tools import get_tools
from .prompts import get_agent_prompt

class Agent:
    def __init__(self, model="gpt-4", temperature=0.7):
        self.llm = ChatOpenAI(model=model, temperature=temperature)
        self.tools = get_tools()
        self.memory = ConversationBufferMemory(
            memory_key="chat_history",
            return_messages=True
        )

        # åˆ›å»ºAgent
        prompt = get_agent_prompt()
        agent = create_openai_tools_agent(
            self.llm,
            self.tools,
            prompt
        )

        # æ‰§è¡Œå™¨
        self.executor = AgentExecutor(
            agent=agent,
            tools=self.tools,
            memory=self.memory,
            verbose=True,
            handle_parsing_errors=True
        )

    def run(self, input_text: str) -> str:
        """è¿è¡ŒAgent"""
        try:
            result = self.executor.invoke({"input": input_text})
            return result["output"]
        except Exception as e:
            return f"é”™è¯¯: {str(e)}"

    def reset_memory(self):
        """é‡ç½®è®°å¿†"""
        self.memory.clear()
```

#### cli/main.py
```python
import typer
from rich.console import Console
from ..agent.core import Agent
from .ui import agent_repl

app = typer.Typer()
console = Console()
agent = None

@app.callback()
def init(
    model: str = typer.Option("gpt-4", help="æ¨¡å‹åç§°"),
    temperature: float = typer.Option(0.7, help="æ¸©åº¦")
):
    """åˆå§‹åŒ–Agent"""
    global agent
    agent = Agent(model=model, temperature=temperature)

@app.command()
def chat(message: str):
    """å•æ¬¡å¯¹è¯"""
    response = agent.run(message)
    console.print(response)

@app.command()
def interactive():
    """äº¤äº’å¼æ¨¡å¼"""
    agent_repl(agent, console)

@app.command()
def web(port: int = 5000):
    """å¯åŠ¨Webç•Œé¢"""
    from ..web.app import create_app
    app = create_app(agent)
    app.run(port=port)

if __name__ == "__main__":
    app()
```

---

## ç¬¬äº”éƒ¨åˆ†:Rustä¼˜åŒ–Python Agent

### æ€§èƒ½ç“¶é¢ˆ

```
Python Agentçš„æ€§èƒ½ç“¶é¢ˆ:
â”œâ”€â”€ æ–‡æœ¬å¤„ç†(åˆ†è¯ã€åŒ¹é…)
â”œâ”€â”€ å‘é‡è®¡ç®—(Embeddingç›¸ä¼¼åº¦)
â”œâ”€â”€ æ•°æ®è§£æ(JSON/XML)
â””â”€â”€ å¹¶å‘å¤„ç†(GILé™åˆ¶)

Rustå¯ä»¥ä¼˜åŒ–çš„éƒ¨åˆ†:
âœ… æ–‡æœ¬å¤„ç†å¼•æ“
âœ… å‘é‡ç›¸ä¼¼åº¦è®¡ç®—
âœ… æ•°æ®åºåˆ—åŒ–/ååºåˆ—åŒ–
âœ… å¹¶å‘ä»»åŠ¡è°ƒåº¦
```

### PyO3: Pythonè°ƒç”¨Rust

#### 1. Rustç«¯å®ç°

```rust
// Cargo.toml
[dependencies]
pyo3 = { version = "0.20", features = ["extension-module"] }
numpy = "0.20"

// src/lib.rs
use pyo3::prelude::*;
use pyo3::types::PyList;

/// æ–‡æœ¬ç›¸ä¼¼åº¦è®¡ç®—(ä½™å¼¦ç›¸ä¼¼åº¦)
#[pyfunction]
fn cosine_similarity(vec1: Vec<f32>, vec2: Vec<f32>) -> PyResult<f32> {
    if vec1.len() != vec2.len() {
        return Err(PyErr::new::<pyo3::exceptions::PyValueError, _>(
            "å‘é‡é•¿åº¦ä¸åŒ¹é…"
        ));
    }

    let dot_product: f32 = vec1.iter()
        .zip(vec2.iter())
        .map(|(a, b)| a * b)
        .sum();

    let norm1: f32 = vec1.iter().map(|x| x * x).sum::<f32>().sqrt();
    let norm2: f32 = vec2.iter().map(|x| x * x).sum::<f32>().sqrt();

    Ok(dot_product / (norm1 * norm2))
}

/// æ‰¹é‡ç›¸ä¼¼åº¦è®¡ç®—
#[pyfunction]
fn batch_similarity(
    query: Vec<f32>,
    documents: Vec<Vec<f32>>
) -> PyResult<Vec<f32>> {
    documents.iter()
        .map(|doc| cosine_similarity(query.clone(), doc.clone()))
        .collect()
}

/// æ–‡æœ¬åˆ†è¯(ç®€å•ç¤ºä¾‹)
#[pyfunction]
fn tokenize(text: &str) -> PyResult<Vec<String>> {
    Ok(text.split_whitespace()
        .map(|s| s.to_string())
        .collect())
}

#[pymodule]
fn rust_agent(_py: Python, m: &PyModule) -> PyResult<()> {
    m.add_function(wrap_pyfunction!(cosine_similarity, m)?)?;
    m.add_function(wrap_pyfunction!(batch_similarity, m)?)?;
    m.add_function(wrap_pyfunction!(tokenize, m)?)?;
    Ok(())
}
```

#### 2. Pythonç«¯ä½¿ç”¨

```python
# ç¼–è¯‘: maturin develop
import rust_agent
import numpy as np

# 1. æ–‡æœ¬åˆ†è¯
text = "Agent æ˜¯æ™ºèƒ½çš„åŠ©æ‰‹"
tokens = rust_agent.tokenize(text)
print(tokens)  # ['Agent', 'æ˜¯', 'æ™ºèƒ½çš„', 'åŠ©æ‰‹']

# 2. ç›¸ä¼¼åº¦è®¡ç®—
vec1 = [0.1, 0.2, 0.3, 0.4]
vec2 = [0.2, 0.3, 0.4, 0.5]
similarity = rust_agent.cosine_similarity(vec1, vec2)
print(f"ç›¸ä¼¼åº¦: {similarity}")

# 3. æ‰¹é‡è®¡ç®—
query = [0.1, 0.2, 0.3]
docs = [
    [0.2, 0.3, 0.4],
    [0.1, 0.1, 0.1],
    [0.3, 0.3, 0.3]
]
similarities = rust_agent.batch_similarity(query, docs)
print(f"ç›¸ä¼¼åº¦åˆ—è¡¨: {similarities}")

# æ€§èƒ½å¯¹æ¯”
import time

# Pythonç‰ˆæœ¬
def cosine_similarity_py(v1, v2):
    import numpy as np
    return np.dot(v1, v2) / (np.linalg.norm(v1) * np.linalg.norm(v2))

# æµ‹è¯•
v1 = np.random.rand(1536).tolist()  # OpenAI Embeddingç»´åº¦
v2 = np.random.rand(1536).tolist()

# Python
start = time.time()
for _ in range(10000):
    cosine_similarity_py(v1, v2)
py_time = time.time() - start

# Rust
start = time.time()
for _ in range(10000):
    rust_agent.cosine_similarity(v1, v2)
rust_time = time.time() - start

print(f"Python: {py_time:.4f}s")
print(f"Rust: {rust_time:.4f}s")
print(f"åŠ é€Ÿæ¯”: {py_time/rust_time:.2f}x")
```

---

## ç¬¬å…­éƒ¨åˆ†:å®æˆ˜é¡¹ç›®å»ºè®®

### é¡¹ç›®1: æ™ºèƒ½ä»£ç åŠ©æ‰‹ (æ¨è!)

```
åŠŸèƒ½:
â”œâ”€â”€ ä»£ç æœç´¢
â”‚   â””â”€â”€ å‘é‡æ£€ç´¢+è¯­ä¹‰æœç´¢
â”œâ”€â”€ ä»£ç è§£é‡Š
â”‚   â””â”€â”€ LLMåˆ†æä»£ç 
â”œâ”€â”€ ä»£ç ç”Ÿæˆ
â”‚   â””â”€â”€ æ ¹æ®éœ€æ±‚ç”Ÿæˆä»£ç 
â”œâ”€â”€ Bugä¿®å¤
â”‚   â””â”€â”€ è‡ªåŠ¨æ£€æµ‹å¹¶ä¿®å¤
â””â”€â”€ æ–‡æ¡£ç”Ÿæˆ
    â””â”€â”€ è‡ªåŠ¨ç”Ÿæˆæ–‡æ¡£

æŠ€æœ¯æ ˆ:
Python: LangChain + LlamaIndex
CLI: Rich + PromptToolkit + Typer
MCP: å·¥å…·æ ‡å‡†åŒ–
Rust: ä»£ç è§£æ(å¯é€‰)
```

### é¡¹ç›®2: çŸ¥è¯†åº“é—®ç­”ç³»ç»Ÿ

```
åŠŸèƒ½:
â”œâ”€â”€ æ–‡æ¡£ä¸Šä¼ 
â”œâ”€â”€ æ™ºèƒ½ç´¢å¼•
â”œâ”€â”€ è¯­ä¹‰æœç´¢
â”œâ”€â”€ å¤šè½®å¯¹è¯
â””â”€â”€ å¼•ç”¨æº¯æº

æŠ€æœ¯æ ˆ:
Python: LlamaIndex (RAG)
å‘é‡åº“: Chroma/Pinecone
Web: Flask
CLI: Typer + Rich
```

### é¡¹ç›®3: å¤šAgentåä½œç³»ç»Ÿ

```
åŠŸèƒ½:
â”œâ”€â”€ ç ”ç©¶Agent (æœç´¢èµ„æ–™)
â”œâ”€â”€ åˆ†æAgent (åˆ†ææ•°æ®)
â”œâ”€â”€ å†™ä½œAgent (ç”ŸæˆæŠ¥å‘Š)
â””â”€â”€ è¯„å®¡Agent (è´¨é‡æ£€æŸ¥)

æŠ€æœ¯æ ˆ:
Python: AutoGen/CrewAI
MCP: Agenté—´é€šä¿¡
Web: Flaskå±•ç¤º
```

---

## å­¦ä¹ è·¯çº¿å›¾

### Month 1: åŸºç¡€æŒæ¡
```
Week 1: LangChainåŸºç¡€
â”œâ”€â”€ å®‰è£…é…ç½®
â”œâ”€â”€ LLMè°ƒç”¨
â”œâ”€â”€ Promptå·¥ç¨‹
â””â”€â”€ ç®€å•é“¾

Week 2: Agentå¼€å‘
â”œâ”€â”€ ReAct Agent
â”œâ”€â”€ å·¥å…·å®šä¹‰
â”œâ”€â”€ Function Calling
â””â”€â”€ è®°å¿†ç®¡ç†

Week 3: RAGç³»ç»Ÿ
â”œâ”€â”€ æ–‡æ¡£åŠ è½½
â”œâ”€â”€ å‘é‡å­˜å‚¨
â”œâ”€â”€ æ£€ç´¢ä¼˜åŒ–
â””â”€â”€ QAé“¾

Week 4: CLIå¼€å‘
â”œâ”€â”€ Richç•Œé¢
â”œâ”€â”€ PromptToolkitäº¤äº’
â”œâ”€â”€ Typerå‘½ä»¤
â””â”€â”€ æ•´åˆAgent
```

### Month 2-3: è¿›é˜¶é¡¹ç›®
```
å®ç°å®Œæ•´Agentåº”ç”¨
â”œâ”€â”€ MCPåè®®é›†æˆ
â”œâ”€â”€ å¤šå·¥å…·æ”¯æŒ
â”œâ”€â”€ Webç•Œé¢
â”œâ”€â”€ éƒ¨ç½²ä¸Šçº¿
â””â”€â”€ å¼€æºå‘å¸ƒ
```

---

## æœ€åçš„å»ºè®®

### æ‚¨çš„ä¼˜åŠ¿

```
âœ… Javaåç«¯ - ç¨³å®šçš„APIæœåŠ¡
âœ… Python AI - æ ¸å¿ƒAgenté€»è¾‘
âœ… Flask - å¿«é€ŸWebåŸå‹
âœ… CLIå·¥å…· - ç”¨æˆ·ä½“éªŒ
âœ… Linux - å¼€å‘ç¯å¢ƒ
âœ… Rust - æ€§èƒ½ä¼˜åŒ–(å¯é€‰)

è¿™æ˜¯å®Œç¾çš„Agentå¼€å‘æ ˆ!
```

### ç«‹å³å¼€å§‹

```
æœ¬å‘¨:
[ ] å®‰è£…LangChain
[ ] å®ç°ç¬¬ä¸€ä¸ªAgent
[ ] æ·»åŠ Richè¾“å‡º
[ ] GitHubå¼€æº

æœ¬æœˆ:
[ ] å®Œæˆä»£ç åŠ©æ‰‹é¡¹ç›®
[ ] é›†æˆMCPåè®®
[ ] å†™æŠ€æœ¯åšå®¢
[ ] æŒç»­ä¼˜åŒ–
```

**Agentå¼€å‘æ˜¯æœªæ¥,æ‚¨å·²ç»å‡†å¤‡å¥½äº†!** ğŸš€
